<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>webpack从零到精通 | 小冰博客</title><meta name="keywords" content="学习,vuejs,webpack"><meta name="author" content="しゅふがく"><meta name="copyright" content="しゅふがく"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="第一章 Webpack简介？🎉什么是Webpack？webpack 是一种前端资源构建工具，一个静态模块打包器(module bundler)。 在 webpack 看来, 前端的所有资源文件(js&#x2F;json&#x2F;css&#x2F;img&#x2F;less&#x2F;…)都会作为模块处理。 它将根据模块的依赖关系进行静态分析，打包生成对应的静态资源(bundle)。 🎉webpack五个核心概念？Entry入口(Entry)"><meta property="og:type" content="article"><meta property="og:title" content="webpack从零到精通"><meta property="og:url" content="http://zfe.space/2020/11/10/2020-11-10/index.html"><meta property="og:site_name" content="小冰博客"><meta property="og:description" content="第一章 Webpack简介？🎉什么是Webpack？webpack 是一种前端资源构建工具，一个静态模块打包器(module bundler)。 在 webpack 看来, 前端的所有资源文件(js&#x2F;json&#x2F;css&#x2F;img&#x2F;less&#x2F;…)都会作为模块处理。 它将根据模块的依赖关系进行静态分析，打包生成对应的静态资源(bundle)。 🎉webpack五个核心概念？Entry入口(Entry)"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://zfe.space/images/letter/w.png"><meta property="article:published_time" content="2020-11-09T18:32:00.000Z"><meta property="article:modified_time" content="2020-11-10T12:16:23.560Z"><meta property="article:author" content="しゅふがく"><meta property="article:tag" content="学习"><meta property="article:tag" content="vuejs"><meta property="article:tag" content="webpack"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://zfe.space/images/letter/w.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://zfe.space/2020/11/10/2020-11-10/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="baidu-site-verification" content="http://data.zz.baidu.com/urls?site=zfe.space&amp;token=LNYL1UdbCpN6wro5"><meta name="360-site-verification" content="https://jspassport.ssl.qhimg.com/11.0.1.js?d182b3f28525f2db83acfaaf6e696dba"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/zfe-2.0@1.20/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE={isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2020-11-10 20:16:23"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(function () {
  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }

  const autoChangeMode = '2'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }
})()</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/butterfly-orchid@1.11/main.css"><meta name="generator" content="Hexo 5.0.0"><link rel="alternate" href="/atom.xml" title="小冰博客" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="小冰博客" type="application/rss+xml"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="/images/headimage.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">127</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">37</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>主页</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i> <span>音乐</span></a></div><div class="menus_item"><a class="site-page" href="/categories/%E6%95%99%E7%A8%8B"><i class="fa-fw fas fa-graduation-cap"></i> <span>教程</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page" href="/reward/"><i class="fa-fw fas fa-thumbs-up"></i> <span>打赏</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/images/letter/w.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">小冰博客</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>主页</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i> <span>音乐</span></a></div><div class="menus_item"><a class="site-page" href="/categories/%E6%95%99%E7%A8%8B"><i class="fa-fw fas fa-graduation-cap"></i> <span>教程</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page" href="/reward/"><i class="fa-fw fas fa-thumbs-up"></i> <span>打赏</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><h1 class="post-title">webpack从零到精通</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-11-09T18:32:00.000Z" title="发表于 2020-11-10 02:32:00">2020-11-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-11-10T12:16:23.560Z" title="更新于 2020-11-10 20:16:23">2020-11-10</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/vue/">vue</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">9.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>36分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2020/11/10/2020-11-10/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/11/10/2020-11-10/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="第一章-Webpack简介？"><a href="#第一章-Webpack简介？" class="headerlink" title="第一章 Webpack简介？"></a>第一章 Webpack简介？</h1><h2 id="🎉什么是Webpack？"><a href="#🎉什么是Webpack？" class="headerlink" title="🎉什么是Webpack？"></a>🎉什么是Webpack？</h2><p>webpack 是一种前端资源构建工具，一个静态模块打包器(module bundler)。 在 webpack 看来, 前端的所有资源文件(js/json/css/img/less/…)都会作为模块处理。 它将根据模块的依赖关系进行静态分析，打包生成对应的静态资源(bundle)。</p><h2 id="🎉webpack五个核心概念？"><a href="#🎉webpack五个核心概念？" class="headerlink" title="🎉webpack五个核心概念？"></a>🎉webpack五个核心概念？</h2><h3 id="Entry"><a href="#Entry" class="headerlink" title="Entry"></a>Entry</h3><p>入口(Entry)：指示 webpack 以哪个文件为入口起点开始打包，分析构建内部依赖图。</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>输出(Output)：指示 webpack 打包后的资源 bundles输出到哪里去，以及如何命名。</p><h3 id="Loader"><a href="#Loader" class="headerlink" title="Loader"></a>Loader</h3><p>Loader：让 webpack 能够去处理那些非 JS 的文件，比如样式文件、图片文件(webpack 自身只理解JS)</p><h3 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h3><p>插件(Plugins)：可以用于执行范围更广的任务。插件的范围包括，从打包优化和压缩，</p><p>一直到重新定义环境中的变量等。</p><h3 id="Mode"><a href="#Mode" class="headerlink" title="Mode"></a>Mode</h3><p>模式(Mode)：指示 webpack使用相应模式的配置。</p><table><thead><tr><th align="left">选项</th><th align="left">描述</th><th align="left">特点</th></tr></thead><tbody><tr><td align="left">development</td><td align="left">会将 DefinePlugin 中 process.env.NODE_ENV 的值设置为 development。启用 NamedChunksPlugin 和 NamedModulesPlugin。</td><td align="left">能让代码本地调试运行的环境</td></tr><tr><td align="left">production</td><td align="left">会将 DefinePlugin 中 process.env.NODE_ENV 的值设置为 production。启用 FlagDependencyUsagePlugin, FlagIncludedChunksPlugin, ModuleConcatenationPlugin, NoEmitOnErrorsPlugin, OccurrenceOrderPlugin, SideEffectsFlagPlugin 和 TerserPlugin。</td><td align="left">能让代码优化上线运行的环境</td></tr></tbody></table><h1 id="第二章Webpack-初体验？"><a href="#第二章Webpack-初体验？" class="headerlink" title="第二章Webpack 初体验？"></a>第二章Webpack 初体验？</h1><h2 id="🎉初始化配置？"><a href="#🎉初始化配置？" class="headerlink" title="🎉初始化配置？"></a>🎉初始化配置？</h2><h4 id="初始化-package-json："><a href="#初始化-package-json：" class="headerlink" title="初始化 package.json："></a>初始化 package.json：</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$npm</span> init</span><br></pre></td></tr></table></figure><h4 id="下载安装webpack："><a href="#下载安装webpack：" class="headerlink" title="下载安装webpack："></a>下载安装webpack：</h4><p>(webpack4以上的版本需要全局/本地都安装webpack-cli)</p><p><strong>全局安装：</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i webpack webpack<span class="literal">-cli</span> <span class="literal">-g</span></span><br></pre></td></tr></table></figure><p><strong>本地安装：</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i webpack webpack<span class="literal">-cli</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><blockquote><p>CNPM介绍：<br>说明：因为谷歌安装插件是从国外服务器下载，受网络影响大，可能出现异常，如果谷歌的服务器在中国就好了，所以我们乐于分享的淘宝团队干了这事来自官网：“这是一个完整npmjs.org镜像，你可以用此代替官方版本（只读），同步频率目前为10分钟一次以保证尽量与官方服务同步“。<br>官方网址：<a target="_blank" rel="noopener" href="http://npm.taobao.org/">http://npm.taobao.org</a><br>安装：命令提示符执行npm install cnpm -g –registry=<a target="_blank" rel="noopener" href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a><br>注意：安装完后最好查看其版本cnpm -v或关闭命令提示符重新打开，安装完直接使用有可能会出现错误</p></blockquote><h2 id="🎉编译打包应用？"><a href="#🎉编译打包应用？" class="headerlink" title="🎉编译打包应用？"></a>🎉编译打包应用？</h2><h4 id="创建初始文件夹"><a href="#创建初始文件夹" class="headerlink" title="创建初始文件夹"></a>创建初始文件夹</h4><p><strong>输入入口：</strong>src文件夹，在文件夹内新建index.js。</p><p><strong>输出出口：</strong>build文件夹，作为输出文件的存放地址。</p><h4 id="打包指令"><a href="#打包指令" class="headerlink" title="打包指令"></a>打包指令</h4><p><strong>开发环境：</strong></p><p>webpack会以 ./src/index.js 为入口文件开始打包，打包后输出到 ./build/built.js 整体打包环境，是开发环境。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$webpack</span> ./src/index.js ^</span><br><span class="line"><span class="literal">-o</span> ./build/built.js ^</span><br><span class="line">-<span class="literal">-mode</span>=development</span><br></pre></td></tr></table></figure><p><strong>生产环境：</strong></p><p>webpack会以 ./src/index.js 为入口文件开始打包，打包后输出到 ./build/built.js 整体打包环境，是生产环境。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$webpack</span> ./src/index.js ^</span><br><span class="line"><span class="literal">-o</span> ./build/built.js ^</span><br><span class="line">-<span class="literal">-mode</span>=production</span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><p>1.webpack 本身能处理 js/json 资源，不能处理 css/img 等其他资源。</p><p>2.生产环境和开发环境将 ES6 模块化编译成浏览器能识别的模块化，</p><p>但是不能处理 ES6 的基本语法转化为 ES5（需要借助 loader）。</p><p>3.生产环境比开发环境多一个压缩 js 代码。</p><h1 id="第三章Webpack-开发环境的基本配置？"><a href="#第三章Webpack-开发环境的基本配置？" class="headerlink" title="第三章Webpack 开发环境的基本配置？"></a>第三章Webpack 开发环境的基本配置？</h1><h2 id="🎉Webpack安装？"><a href="#🎉Webpack安装？" class="headerlink" title="🎉Webpack安装？"></a>🎉Webpack安装？</h2><p>为了保障能够正常运行Webpack，在开始项目前，可以在项目的根目录安装</p><h2 id="🎉Webpack定义配置文件？"><a href="#🎉Webpack定义配置文件？" class="headerlink" title="🎉Webpack定义配置文件？"></a>🎉Webpack定义配置文件？</h2><p>webpack.config.js 是 webpack 的配置文件。</p><p>作用: 指示 webpack 干哪些活（当你运行 webpack 指令时，会加载里面的配置）</p><p>因此请将webpack.config.js放在打包文件的根目录里。</p><p><strong>注意：</strong>所有构建工具都是基于 nodejs 平台运行的，模块化默认采用 commonjs。</p><p>基本的配置文件如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//resolve用来拼接绝对路径</span></span><br><span class="line"><span class="keyword">const</span> &#123;resolve&#125; = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports =&#123;</span><br><span class="line">  <span class="comment">//webpack配置</span></span><br><span class="line">  <span class="comment">//入口起点</span></span><br><span class="line">  entry: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="comment">//输出</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    <span class="comment">//输出文件名</span></span><br><span class="line">    filename: <span class="string">&quot;built.js&quot;</span>,</span><br><span class="line">    <span class="comment">//__dirname是nodejs的变量，代表当前文件的目录绝对路径</span></span><br><span class="line">    path: resolve(__dirname,<span class="string">&#x27;build&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//loader的配置</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">        <span class="comment">//详细的loader配置</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//plugins的配置</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">//详细的插件配置</span></span><br><span class="line">  ],</span><br><span class="line">  mode:<span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="comment">// mode:&#x27;production&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id=""><a href="#" class="headerlink" title=""></a></h2><h1 id="第四章Webpack-打包资源？"><a href="#第四章Webpack-打包资源？" class="headerlink" title="第四章Webpack 打包资源？"></a>第四章Webpack 打包资源？</h1><h2 id="🎉打包前准备？"><a href="#🎉打包前准备？" class="headerlink" title="🎉打包前准备？"></a>🎉打包前准备？</h2><p>js和css资源需要提前引入。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.less&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./xx.js&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="🎉Webpack打包css-less样式资源？"><a href="#🎉Webpack打包css-less样式资源？" class="headerlink" title="🎉Webpack打包css/less样式资源？"></a>🎉Webpack打包css/less样式资源？</h2><h3 id="css打包的方法"><a href="#css打包的方法" class="headerlink" title="css打包的方法"></a><strong>css打包的方法</strong></h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>使用前需要安装style-loader和css-loader。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i style<span class="literal">-loader</span> css<span class="literal">-loader</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h4 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">rules: [</span><br><span class="line">    <span class="comment">//详细的loader配置</span></span><br><span class="line">  &#123; <span class="comment">//通过正则表达式取到.css结尾的文件</span></span><br><span class="line">    test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    <span class="comment">//使用哪些loader</span></span><br><span class="line">    use:[</span><br><span class="line">        <span class="comment">//use数组中loader的执行顺序：从右到左，从下到上依次执行</span></span><br><span class="line">        <span class="comment">//创建一个style标签，将js中的样式资源插入进去，添加到页面中的head中生效</span></span><br><span class="line">      <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">        <span class="comment">//将css文件变成commonjs模块加载到js中，里面内容是样式字符串</span></span><br><span class="line">      <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure><h3 id="less打包的方法"><a href="#less打包的方法" class="headerlink" title="less打包的方法"></a><strong>less打包的方法</strong></h3><h4 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a><strong>安装</strong></h4><p>使用前需要安装style-loader、css-loader、less@xxx和less-loader。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i style<span class="literal">-loader</span> css<span class="literal">-loader</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h4 id="修改配置-1"><a href="#修改配置-1" class="headerlink" title="修改配置"></a>修改配置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="comment">//不同文件必须配置不同的loader处理</span></span><br><span class="line">  test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">  use:[</span><br><span class="line">    <span class="comment">//创建一个style标签，将js中的样式资源插入进去，添加到页面中的head中生效</span></span><br><span class="line">    <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">    <span class="comment">//将css文件变成commonjs模块加载到js中，里面内容是样式字符串</span></span><br><span class="line">    <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">      <span class="comment">//将less文件变为css文件</span></span><br><span class="line">    <span class="string">&#x27;less-loader&#x27;</span>,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="🎉Webpack打包loader与plugins的区别？"><a href="#🎉Webpack打包loader与plugins的区别？" class="headerlink" title="🎉Webpack打包loader与plugins的区别？"></a>🎉Webpack打包loader与plugins的区别？</h2><p><strong>loader：</strong>1.下载 2.使用（配置loader）</p><p><strong>plugins：</strong>1.下载 2.引入 3.使用</p><h2 id="🎉Webpack打包html和图片资源？"><a href="#🎉Webpack打包html和图片资源？" class="headerlink" title="🎉Webpack打包html和图片资源？"></a>🎉Webpack打包html和图片资源？</h2><h3 id="html打包的方法"><a href="#html打包的方法" class="headerlink" title="html打包的方法"></a><strong>html打包的方法</strong></h3><h4 id="安装-2"><a href="#安装-2" class="headerlink" title="安装"></a>安装</h4><p>使用前需要安装html-webpack-plugin。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i html<span class="literal">-webpack</span><span class="literal">-plugin</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h4 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="修改配置-2"><a href="#修改配置-2" class="headerlink" title="修改配置"></a>修改配置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="comment">//默认会创建一个空的html文件，自动引入打包输出的所有资源（js/css）</span></span><br><span class="line">    <span class="comment">//需求：需要一个有结构的html文件</span></span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        <span class="comment">//复制一个的html文件，自动引入打包输出的所有资源（js/css）</span></span><br><span class="line">        template:<span class="string">&#x27;./src/index.html&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//详细的插件配置</span></span><br><span class="line">],</span><br></pre></td></tr></table></figure><h3 id="图片打包的方法"><a href="#图片打包的方法" class="headerlink" title="图片打包的方法"></a><strong>图片打包的方法</strong></h3><blockquote><p>教程中的4.0版本的教学在最新5.0版本中会报错，需要在output中加上</p></blockquote><h4 id="解决报错"><a href="#解决报错" class="headerlink" title="解决报错"></a>解决报错</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">publicPath:<span class="string">&#x27;./&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="安装-3"><a href="#安装-3" class="headerlink" title="安装"></a>安装</h4><p>使用前需要安装html-loader、file-loader和url-loader。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i html<span class="literal">-loader</span> file<span class="literal">-loader</span> url<span class="literal">-loader</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h4 id="修改配置-3"><a href="#修改配置-3" class="headerlink" title="修改配置"></a>修改配置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//resolve用来拼接绝对路径</span></span><br><span class="line"><span class="keyword">const</span> &#123;resolve&#125; = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports =&#123;</span><br><span class="line">    <span class="comment">//webpack配置</span></span><br><span class="line">    <span class="comment">//入口起点</span></span><br><span class="line">    entry: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">    <span class="comment">//输出</span></span><br><span class="line">    output: &#123;</span><br><span class="line">        <span class="comment">//输出文件名</span></span><br><span class="line">        filename: <span class="string">&quot;built.js&quot;</span>,</span><br><span class="line">        <span class="comment">//__dirname是nodejs的变量，代表当前文件的目录绝对路径</span></span><br><span class="line">        path: resolve(__dirname,<span class="string">&#x27;build&#x27;</span>),</span><br><span class="line">        publicPath:<span class="string">&#x27;./&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//loader的配置</span></span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">                <span class="comment">//使用多个资源处理use</span></span><br><span class="line">                use:[<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader&#x27;</span>,<span class="string">&#x27;less-loader&#x27;</span>,]</span><br><span class="line">            &#125; ,<span class="comment">//详细的loader配置</span></span><br><span class="line">            &#123;</span><br><span class="line">               test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">                <span class="comment">//使用一个loader</span></span><br><span class="line">                loader: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">                <span class="comment">//url-loader依赖file-loader</span></span><br><span class="line">                options:&#123;</span><br><span class="line">                   <span class="comment">//图片大小小于8kb就会被base64处理</span></span><br><span class="line">                    <span class="comment">//优点：减少请求数量（减轻服务器压力）</span></span><br><span class="line">                    <span class="comment">//缺点：图片体积会变大（文件请求速度变慢）</span></span><br><span class="line">                   limit:<span class="number">8</span>*<span class="number">1024</span>,</span><br><span class="line">                   <span class="comment">//定义名字的哈希值</span></span><br><span class="line">                    name: <span class="string">&#x27;[10].[ext]&#x27;</span>,</span><br><span class="line">                    <span class="comment">//问题：因为url-loader默认使用es6模块化解析，</span></span><br><span class="line">                    <span class="comment">//而 html-loader使用commonjs，因此这里要转化一下</span></span><br><span class="line">                    esModule:<span class="literal">false</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test:  <span class="regexp">/\.html$/</span>,</span><br><span class="line">                <span class="comment">//处理html中的图片（负责引入img）</span></span><br><span class="line">                use:<span class="string">&#x27;html-loader&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//plugins的配置</span></span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="comment">//默认会创建一个空的html文件，自动引入打包输出的所有资源（js/css）</span></span><br><span class="line">        <span class="comment">//需求：需要一个有结构的html文件</span></span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            <span class="comment">//复制一个的html文件，自动引入打包输出的所有资源（js/css）</span></span><br><span class="line">            template:<span class="string">&#x27;./src/index.html&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">//详细的插件配置</span></span><br><span class="line">    ],</span><br><span class="line">    mode:<span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">    <span class="comment">// mode:&#x27;production&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="🎉其他资源的打包的方法"><a href="#🎉其他资源的打包的方法" class="headerlink" title="🎉其他资源的打包的方法"></a>🎉<strong>其他资源的打包的方法</strong></h2><h4 id="安装-4"><a href="#安装-4" class="headerlink" title="安装"></a>安装</h4><p>使用前需要安装file-loader。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i file<span class="literal">-loader</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h4 id="修改配置-4"><a href="#修改配置-4" class="headerlink" title="修改配置"></a>修改配置</h4><p>然后修改配置。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当处理css、js、html之外的资源时</span></span><br><span class="line"><span class="comment">//可使用file-loader进行打包</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//这里使用exclude进行排除</span></span><br><span class="line">exclude:  <span class="regexp">/\.(css|js|html)$/</span>,</span><br><span class="line">use:<span class="string">&#x27;file-loader&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="🎉开发服务器-devServer配置？"><a href="#🎉开发服务器-devServer配置？" class="headerlink" title="🎉开发服务器_devServer配置？"></a>🎉开发服务器_devServer配置？</h2><blockquote><p>配置中出现的问题：<br>webpack-dev-server并没有兼容最新版的webpack-cli<br>会报错Error: Cannot find module ‘webpack-cli/bin/config-yargs’<br>因此需要卸载最新版的脚手架<br>采用符合webpack-dev-server依赖的版本</p></blockquote><h4 id="卸载之前的webpack-cli"><a href="#卸载之前的webpack-cli" class="headerlink" title="卸载之前的webpack-cli"></a>卸载之前的webpack-cli</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$npm</span> uninstall webpack<span class="literal">-cli</span></span><br></pre></td></tr></table></figure><h4 id="安装符合依赖的webpack-cli-webpack-dev-server最新版对应3-3）"><a href="#安装符合依赖的webpack-cli-webpack-dev-server最新版对应3-3）" class="headerlink" title="安装符合依赖的webpack-cli(webpack-dev-server最新版对应3.3）"></a>安装符合依赖的webpack-cli(webpack-dev-server最新版对应3.3）</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$npm</span> install webpack<span class="literal">-cli</span> webpack<span class="literal">-cli</span>@<span class="number">3.3</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h4 id="详细配置："><a href="#详细配置：" class="headerlink" title="详细配置："></a>详细配置：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用来自动化编译和hexo s差不多</span></span><br><span class="line"><span class="comment">//只会在内存中编译打包，不会有任何输出</span></span><br><span class="line"><span class="comment">//启动指令为：webpack-dev-server，需要下载对应的包</span></span><br><span class="line">devServer:&#123;</span><br><span class="line">    设置路径</span><br><span class="line">    contentBase:resolve(__dirname,<span class="string">&#x27;build&#x27;</span>),</span><br><span class="line">    <span class="comment">//是否使用gzip进行压缩</span></span><br><span class="line">    compress:<span class="literal">true</span>,</span><br><span class="line">    <span class="comment">//服务端口号</span></span><br><span class="line">    port:<span class="number">3000</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="🎉最终开发环境配置？"><a href="#🎉最终开发环境配置？" class="headerlink" title="🎉最终开发环境配置？"></a>🎉最终开发环境配置？</h2><blockquote><p>切记单一loader请用loader不要用use，不然会报错！！！</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//resolve用来拼接绝对路径</span></span><br><span class="line"><span class="keyword">const</span> &#123;resolve&#125; = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="comment">//引入&#x27;html-webpack-plugin&#x27;插件</span></span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">//webpack配置</span></span><br><span class="line">    <span class="comment">//入口起点</span></span><br><span class="line">    entry: <span class="string">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class="line">    <span class="comment">//输出</span></span><br><span class="line">    output: &#123;</span><br><span class="line">        <span class="comment">//输出文件名</span></span><br><span class="line">        filename: <span class="string">&quot;js/built.js&quot;</span>,</span><br><span class="line">        <span class="comment">//__dirname是nodejs的变量，代表当前文件的目录绝对路径</span></span><br><span class="line">        path: resolve(__dirname, <span class="string">&#x27;build&#x27;</span>),</span><br><span class="line">        <span class="comment">//公共路径为当前路径</span></span><br><span class="line">        publicPath: <span class="string">&#x27;./&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//loader的配置</span></span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        <span class="comment">//过滤条件</span></span><br><span class="line">        rules: [</span><br><span class="line">            <span class="comment">//过滤css</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">                <span class="comment">//使用多个资源处理use</span></span><br><span class="line">                use: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//过滤less</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">                <span class="comment">//使用多个资源处理use</span></span><br><span class="line">                use: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;less-loader&#x27;</span>,]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//过滤图片</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">                <span class="comment">//使用一个loader</span></span><br><span class="line">                loader: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">                <span class="comment">//url-loader依赖file-loader</span></span><br><span class="line">                options: &#123;</span><br><span class="line">                    outputPath:<span class="string">&#x27;images&#x27;</span>,</span><br><span class="line">                    <span class="comment">//图片大小小于8kb就会被base64处理</span></span><br><span class="line">                    <span class="comment">//优点：减少请求数量（减轻服务器压力）</span></span><br><span class="line">                    <span class="comment">//缺点：图片体积会变大（文件请求速度变慢）</span></span><br><span class="line">                    limit: <span class="number">8</span> * <span class="number">1024</span>,</span><br><span class="line">                    <span class="comment">//定义名字的哈希值</span></span><br><span class="line">                    name: <span class="string">&#x27;[10].[ext]&#x27;</span>,</span><br><span class="line">                    <span class="comment">//问题：因为url-loader默认使用es6模块化解析，</span></span><br><span class="line">                    <span class="comment">//而 html-loader使用commonjs，因此这里要转化一下</span></span><br><span class="line">                    esModule: <span class="literal">false</span>,</span><br><span class="line">                   <span class="comment">// outputPath: &#x27;images&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//过滤html</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.html$/</span>,</span><br><span class="line">                <span class="comment">//处理html中的图片（负责引入img）</span></span><br><span class="line">                loader: <span class="string">&#x27;html-loader&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//过滤其他</span></span><br><span class="line">            <span class="comment">//当处理css、js、html之外的资源时</span></span><br><span class="line">            <span class="comment">//可使用file-loader进行打包</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//这里使用exclude进行排除</span></span><br><span class="line">                exclude: <span class="regexp">/\.(gif|png|jpg|less|css|js|html)$/</span>,</span><br><span class="line">                loader: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    outputPath:<span class="string">&#x27;media&#x27;</span>,</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//plugins的配置</span></span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="comment">//默认会创建一个空的html文件，自动引入打包输出的所有资源（js/css）</span></span><br><span class="line">        <span class="comment">//需求：需要一个有结构的html文件</span></span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            <span class="comment">//复制一个的html文件，自动引入打包输出的所有资源（js/css）</span></span><br><span class="line">            template: <span class="string">&#x27;./src/index.html&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">//详细的插件配置</span></span><br><span class="line">    ],</span><br><span class="line">    mode: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">    <span class="comment">// mode:&#x27;production&#x27;</span></span><br><span class="line">    <span class="comment">//用来自动化编译和hexo s差不多</span></span><br><span class="line">    <span class="comment">//只会在内存中编译打包，不会有任何输出</span></span><br><span class="line">    <span class="comment">//启动指令为：webpack-dev-server，需要下载对应的包</span></span><br><span class="line">    devServer: &#123;</span><br><span class="line">        <span class="comment">//设置路径</span></span><br><span class="line">        contentBase: resolve(__dirname, <span class="string">&#x27;build&#x27;</span>),</span><br><span class="line">        <span class="comment">//是否使用gzip进行压缩</span></span><br><span class="line">        compress: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">//服务端口号</span></span><br><span class="line">        port: <span class="number">3000</span>,</span><br><span class="line">        <span class="comment">//自动打开浏览</span></span><br><span class="line">        open: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="第五章Webpack-生产环境的基本配置？"><a href="#第五章Webpack-生产环境的基本配置？" class="headerlink" title="第五章Webpack 生产环境的基本配置？"></a>第五章Webpack 生产环境的基本配置？</h1><h2 id="🎉提取css成为单个文件？"><a href="#🎉提取css成为单个文件？" class="headerlink" title="🎉提取css成为单个文件？"></a>🎉提取css成为单个文件？</h2><h4 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a><strong>安装插件</strong></h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i mini<span class="literal">-css</span><span class="literal">-extract</span><span class="literal">-plugin</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h4 id="引入插件"><a href="#引入插件" class="headerlink" title="引入插件"></a><strong>引入插件</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="插入插件"><a href="#插入插件" class="headerlink" title="插入插件"></a><strong>插入插件</strong></h4><p>修改ccs使用的loader</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    <span class="comment">//使用多个资源处理use</span></span><br><span class="line">    use: [</span><br><span class="line">    <span class="comment">//这里使用该插件的loader实现css从js中抽出</span></span><br><span class="line">    MiniCssExtractPlugin.loader, </span><br><span class="line">    <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h4 id="引入配置"><a href="#引入配置" class="headerlink" title="引入配置"></a>引入配置</h4><p>通过修改filename修改css导出的路径。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">filename: <span class="string">&#x27;css/main.css&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="🎉css兼容性处理？"><a href="#🎉css兼容性处理？" class="headerlink" title="🎉css兼容性处理？"></a>🎉css兼容性处理？</h2><h4 id="安装依赖插件"><a href="#安装依赖插件" class="headerlink" title="安装依赖插件"></a><strong>安装依赖插件</strong></h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i postcss<span class="literal">-loader</span> postcss<span class="literal">-preset</span><span class="literal">-env</span> autoprefixer <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h4 id="配置项webpack-config-js"><a href="#配置项webpack-config-js" class="headerlink" title="配置项webpack.config.js"></a><strong>配置项webpack.config.js</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">css兼容性处理： </span></span><br><span class="line"><span class="comment">postcss --》 postcss-loader postcss-preset-env</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//设置环境变量</span></span><br><span class="line">process.env.NODE_ENV=<span class="string">&#x27;development&#x27;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">use: [</span><br><span class="line">    MiniCssExtractPlugin.loader,</span><br><span class="line">    <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;postcss-loader&#x27;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="postcss配置"><a href="#postcss配置" class="headerlink" title="postcss配置"></a><strong>postcss配置</strong></h4><p>在webpack.config.js同级目录新建postcss.config.js配置项。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">    <span class="comment">//这里写你需要引入的插件</span></span><br><span class="line">        <span class="built_in">require</span>(<span class="string">&#x27;autoprefixer&#x27;</span>),<span class="comment">//处理前缀兼容问题</span></span><br><span class="line">        <span class="built_in">require</span>(<span class="string">&#x27;postcss-preset-env&#x27;</span>)<span class="comment">//适配不同浏览器环境</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="修改package-json"><a href="#修改package-json" class="headerlink" title="修改package.json"></a><strong>修改package.json</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;browserslist&quot;</span>:&#123;</span><br><span class="line">  <span class="string">&quot;development&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;last 1 chrome version&quot;</span>,</span><br><span class="line">    <span class="string">&quot;last 1 firefox version&quot;</span>,</span><br><span class="line">    <span class="string">&quot;last 1 safari version&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;production&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;&gt;0.2%&quot;</span>,<span class="comment">//兼容大多数浏览器</span></span><br><span class="line">    <span class="string">&quot;not dead&quot;</span>,<span class="comment">//去除死亡浏览器</span></span><br><span class="line">    <span class="string">&quot;not op_mini all&quot;</span><span class="comment">//去除open—mini</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="🎉压缩css文件？"><a href="#🎉压缩css文件？" class="headerlink" title="🎉压缩css文件？"></a>🎉压缩css文件？</h2><h4 id="安装插件-1"><a href="#安装插件-1" class="headerlink" title="安装插件"></a>安装插件</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i <span class="built_in">optimize-css</span><span class="literal">-assets</span><span class="literal">-webpack</span><span class="literal">-plugin</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h4 id="插件引入"><a href="#插件引入" class="headerlink" title="插件引入"></a><strong>插件引入</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> OptimizeCssAssetWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;optimize-css-assets-webpack-plugin&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="🎉js语法检查？"><a href="#🎉js语法检查？" class="headerlink" title="🎉js语法检查？"></a>🎉js语法检查？</h2><h4 id="安装插件-2"><a href="#安装插件-2" class="headerlink" title="安装插件"></a>安装插件</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i eslint eslint<span class="literal">-loader</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h4 id="使用airbnb风格语言"><a href="#使用airbnb风格语言" class="headerlink" title="使用airbnb风格语言"></a><strong>使用airbnb风格语言</strong></h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i eslint eslint<span class="literal">-plugin</span><span class="literal">-import</span> eslint<span class="literal">-config</span><span class="literal">-airbnb</span><span class="literal">-base</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h4 id="配置package-json"><a href="#配置package-json" class="headerlink" title="配置package.json"></a>配置package.json</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;eslintConfig&quot;</span>:&#123;</span><br><span class="line">  <span class="string">&quot;extends&quot;</span>:<span class="string">&quot;airbnb-base&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="配置自动修复"><a href="#配置自动修复" class="headerlink" title="配置自动修复"></a>配置自动修复</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="comment">//只检查自己写的代码，第三方库不用检查</span></span><br><span class="line">    test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">    exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">    loader: <span class="string">&#x27;eslint-loader&#x27;</span>,</span><br><span class="line">    enforce:<span class="string">&#x27;pre&#x27;</span>,</span><br><span class="line">    options: &#123;</span><br><span class="line">        <span class="comment">//设置检查规则</span></span><br><span class="line">        <span class="comment">//在package.json中进行设置</span></span><br><span class="line">        <span class="comment">//在eslintConfig中进行设置</span></span><br><span class="line">        <span class="comment">//推荐使用airbnb规则</span></span><br><span class="line">        <span class="comment">//为了使用它</span></span><br><span class="line">        <span class="comment">//需要下载三个库 airbnb -》 eslint eslint-plugin-import eslint-config-airbnb-base</span></span><br><span class="line">        <span class="comment">//fix:true自动修复</span></span><br><span class="line">        fix:<span class="literal">true</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="忽略某一行（如console-log"><a href="#忽略某一行（如console-log" class="headerlink" title="忽略某一行（如console.log)"></a>忽略某一行（如console.log)</h4><p>加入注释，忽略下一行检查</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;eslint-disable-next-line</span><br></pre></td></tr></table></figure><h2 id="🎉js的基本兼容性问题？"><a href="#🎉js的基本兼容性问题？" class="headerlink" title="🎉js的基本兼容性问题？"></a>🎉js的基本兼容性问题？</h2><h4 id="安装插件-3"><a href="#安装插件-3" class="headerlink" title="安装插件"></a>安装插件</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i babel<span class="literal">-loader</span> @babel/p<span class="built_in">reset-env</span> @babel/core<span class="selector-tag">@</span>^<span class="number">7.0</span>.<span class="number">0</span><span class="literal">-0</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h4 id="新增配置"><a href="#新增配置" class="headerlink" title="新增配置"></a>新增配置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">    exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">    loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">    options: &#123;</span><br><span class="line">        <span class="comment">//预设：指示babel做哪些兼容处理</span></span><br><span class="line">        <span class="comment">//不兼容高级语法，如promise</span></span><br><span class="line">        presets: [<span class="string">&#x27;@babel/preset-env&#x27;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="🎉js的全部兼容性问题处理？（非常暴力，但已弃用）"><a href="#🎉js的全部兼容性问题处理？（非常暴力，但已弃用）" class="headerlink" title="🎉js的全部兼容性问题处理？（非常暴力，但已弃用）"></a>🎉js的全部兼容性问题处理？（非常暴力，但已弃用）</h2><h4 id="安装插件-4"><a href="#安装插件-4" class="headerlink" title="安装插件"></a>安装插件</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i @babel/pollyfill <span class="literal">-D</span>  //已经弃用</span><br></pre></td></tr></table></figure><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#39;@babel&#x2F;pollyfill&#39; &#x2F;&#x2F;已经弃用</span><br></pre></td></tr></table></figure><h2 id="🎉js的按需求处理兼容性问题？"><a href="#🎉js的按需求处理兼容性问题？" class="headerlink" title="🎉js的按需求处理兼容性问题？"></a>🎉js的按需求处理兼容性问题？</h2><h4 id="安装插件-5"><a href="#安装插件-5" class="headerlink" title="安装插件"></a>安装插件</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i core<span class="literal">-js</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h4 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">options: &#123;</span><br><span class="line"><span class="comment">//预设：指示babel做哪些兼容处理</span></span><br><span class="line"><span class="comment">//这里是数组套数组的写法</span></span><br><span class="line">        presets: [[<span class="string">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class="line">&#123;<span class="comment">//按需加载</span></span><br><span class="line">useBuiltIns: <span class="string">&#x27;usage&#x27;</span>,</span><br><span class="line"><span class="comment">//指定core-js的版本</span></span><br><span class="line">corejs: &#123;</span><br><span class="line">version: <span class="number">3</span>,</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//指定具体要做到某个浏览器的哪一个版本</span></span><br><span class="line">targets: &#123;</span><br><span class="line">chrome: <span class="string">&#x27;60&#x27;</span>,</span><br><span class="line">firefox: <span class="string">&#x27;60&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;]]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="🎉js和html的压缩处理？"><a href="#🎉js和html的压缩处理？" class="headerlink" title="🎉js和html的压缩处理？"></a>🎉js和html的压缩处理？</h2><h4 id="js压缩"><a href="#js压缩" class="headerlink" title="js压缩"></a>js压缩</h4><p>将mode从development变为production。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//mode: &#x27;development&#x27;,</span></span><br><span class="line"> mode:<span class="string">&#x27;production&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="🎉最终生产环境配置？"><a href="#🎉最终生产环境配置？" class="headerlink" title="🎉最终生产环境配置？"></a>🎉最终生产环境配置？</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//resolve用来拼接绝对路径</span></span><br><span class="line"><span class="keyword">const</span> &#123;resolve&#125; = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="comment">//引入&#x27;html-webpack-plugin&#x27;插件</span></span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> OptimizeCssAssetWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;optimize-css-assets-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="comment">//设置环境变量</span></span><br><span class="line"><span class="comment">//process.env.NODE_ENV=&#x27;development&#x27;;</span></span><br><span class="line"><span class="comment">//复用loader</span></span><br><span class="line"><span class="keyword">const</span> commonCssLoader = [</span><br><span class="line">    MiniCssExtractPlugin.loader,</span><br><span class="line">    <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;postcss-loader&#x27;</span>,</span><br><span class="line">];</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">//webpack配置</span></span><br><span class="line">    <span class="comment">//入口起点</span></span><br><span class="line">    entry: <span class="string">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class="line">    <span class="comment">//输出</span></span><br><span class="line">    output: &#123;</span><br><span class="line">        <span class="comment">//输出文件名</span></span><br><span class="line">        filename: <span class="string">&quot;js/built.js&quot;</span>,</span><br><span class="line">        <span class="comment">//__dirname是nodejs的变量，代表当前文件的目录绝对路径</span></span><br><span class="line">        path: resolve(__dirname, <span class="string">&#x27;build&#x27;</span>),</span><br><span class="line">        <span class="comment">//公共路径为当前路径</span></span><br><span class="line">        publicPath: <span class="string">&#x27;./&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//loader的配置</span></span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        <span class="comment">//过滤条件</span></span><br><span class="line">        rules: [</span><br><span class="line">            <span class="comment">//js兼容性处理</span></span><br><span class="line">            <span class="comment">// 1.使用babel进行基本的兼容性处理</span></span><br><span class="line">            <span class="comment">// 使用babel-loader @babel/preset-env @babel/core</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line"></span><br><span class="line">                loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    <span class="comment">//预设：指示babel做哪些兼容处理</span></span><br><span class="line">                    presets: [<span class="string">&#x27;@babel/preset-env&#x27;</span>]</span><br><span class="line">                    <span class="comment">// presets: [[&#x27;@babel/preset-env&#x27;,</span></span><br><span class="line">                    <span class="comment">//     &#123;//按需加载</span></span><br><span class="line">                    <span class="comment">//         useBuiltIns: &#x27;usage&#x27;,</span></span><br><span class="line">                    <span class="comment">//         //指定core-js的版本</span></span><br><span class="line">                    <span class="comment">//         corejs: &#123;</span></span><br><span class="line">                    <span class="comment">//             version: 3,</span></span><br><span class="line">                    <span class="comment">//         &#125;,</span></span><br><span class="line">                    <span class="comment">//         //指定具体要做到哪一个版本</span></span><br><span class="line">                    <span class="comment">//         targets: &#123;</span></span><br><span class="line">                    <span class="comment">//             chrome: &#x27;60&#x27;,</span></span><br><span class="line">                    <span class="comment">//             firefox: &#x27;60&#x27;</span></span><br><span class="line">                    <span class="comment">//         &#125;</span></span><br><span class="line">                    <span class="comment">//     &#125;]]</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123; <span class="comment">//只检查自己写的代码，第三方库不用检查</span></span><br><span class="line">                test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">                loader: <span class="string">&#x27;eslint-loader&#x27;</span>,</span><br><span class="line">                <span class="comment">//优先执行</span></span><br><span class="line">                enforce: <span class="string">&#x27;pre&#x27;</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    <span class="comment">//设置检查规则</span></span><br><span class="line">                    <span class="comment">//在package.json中进行设置</span></span><br><span class="line">                    <span class="comment">//在eslintConfig中进行设置</span></span><br><span class="line">                    <span class="comment">//推荐使用airbnb规则</span></span><br><span class="line">                    <span class="comment">//为了使用它</span></span><br><span class="line">                    <span class="comment">//需要下载三个库 airbnb -》 eslint eslint-plugin-import eslint-config-airbnb-base</span></span><br><span class="line">                    <span class="comment">//fix:true自动修复</span></span><br><span class="line">                    fix: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//过滤css</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">                <span class="comment">//使用多个资源处理use</span></span><br><span class="line">                use: [...commonCssLoader],</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//过滤less</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">                <span class="comment">//使用多个资源处理use</span></span><br><span class="line">                use: [...commonCssLoader, <span class="string">&#x27;less-loader&#x27;</span>,]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//过滤图片</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(png|jpg|gif)/</span>,</span><br><span class="line">                <span class="comment">//使用一个loader</span></span><br><span class="line">                loader: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">                <span class="comment">//url-loader依赖file-loader</span></span><br><span class="line">                options: &#123;</span><br><span class="line">                    <span class="comment">//图片大小小于8kb就会被base64处理</span></span><br><span class="line">                    <span class="comment">//优点：减少请求数量（减轻服务器压力）</span></span><br><span class="line">                    <span class="comment">//缺点：图片体积会变大（文件请求速度变慢）</span></span><br><span class="line">                    limit: <span class="number">8</span> * <span class="number">1024</span>,</span><br><span class="line">                    <span class="comment">//定义名字的哈希值</span></span><br><span class="line">                    name: <span class="string">&#x27;[10].[ext]&#x27;</span>,</span><br><span class="line">                    <span class="comment">//问题：因为url-loader默认使用es6模块化解析，</span></span><br><span class="line">                    <span class="comment">//而 html-loader使用commonjs，因此这里要转化一下</span></span><br><span class="line">                    esModule: <span class="literal">false</span>,</span><br><span class="line">                    outputPath: <span class="string">&#x27;images&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//过滤html</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.html$/</span>,</span><br><span class="line">                <span class="comment">//处理html中的图片（负责引入img）</span></span><br><span class="line">                loader: <span class="string">&#x27;html-loader&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//过滤其他</span></span><br><span class="line">            <span class="comment">//当处理css、js、html之外的资源时</span></span><br><span class="line">            <span class="comment">//可使用file-loader进行打包</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//这里使用exclude进行排除</span></span><br><span class="line">                exclude: <span class="regexp">/\.(gif|png|jpg|less|css|js|html)$/</span>,</span><br><span class="line">                loader: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    outputPath: <span class="string">&#x27;media&#x27;</span>,</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//plugins的配置</span></span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="comment">//默认会创建一个空的html文件，自动引入打包输出的所有资源（js/css）</span></span><br><span class="line">        <span class="comment">//需求：需要一个有结构的html文件</span></span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            <span class="comment">//复制一个的html文件，自动引入打包输出的所有资源（js/css）</span></span><br><span class="line">            template: <span class="string">&#x27;./src/index.html&#x27;</span>,</span><br><span class="line">            minify: &#123;</span><br><span class="line">                <span class="comment">//移除空格</span></span><br><span class="line">                collapseWhitespace: <span class="literal">true</span>,</span><br><span class="line">                <span class="comment">//移除注释</span></span><br><span class="line">                removeComments: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: <span class="string">&#x27;css/main.css&#x27;</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> OptimizeCssAssetWebpackPlugin()</span><br><span class="line">        <span class="comment">//详细的插件配置</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// mode: &#x27;development&#x27;,</span></span><br><span class="line">    mode: <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">    <span class="comment">//用来自动化编译和hexo s差不多</span></span><br><span class="line">    <span class="comment">//只会在内存中编译打包，不会有任何输出</span></span><br><span class="line">    <span class="comment">//启动指令为：webpack-dev-server，需要下载对应的包</span></span><br><span class="line">    devServer: &#123;</span><br><span class="line">        <span class="comment">//设置路径</span></span><br><span class="line">        contentBase: resolve(__dirname, <span class="string">&#x27;build&#x27;</span>),</span><br><span class="line">        <span class="comment">//是否使用gzip进行压缩</span></span><br><span class="line">        compress: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">//服务端口号</span></span><br><span class="line">        port: <span class="number">3000</span>,</span><br><span class="line">        <span class="comment">//自动打开浏览</span></span><br><span class="line">        open: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="第六章开发环境webpack性能优化？"><a href="#第六章开发环境webpack性能优化？" class="headerlink" title="第六章开发环境webpack性能优化？"></a>第六章<strong>开发环境</strong>webpack性能优化？</h1><h2 id="🎉基本介绍？"><a href="#🎉基本介绍？" class="headerlink" title="🎉基本介绍？"></a>🎉基本介绍？</h2><p>主要分为开发环境性能优化和生产环境性能优化。</p><p><strong>开发环境的优化目的：</strong>优化打包速度及优化代码调试</p><p><strong>生产环境的优化目的：</strong>优化代码打包速度及优化代码的性能</p><h2 id="🎉打包速度优化-HMR？"><a href="#🎉打包速度优化-HMR？" class="headerlink" title="🎉打包速度优化-HMR？"></a>🎉打包速度优化-HMR？</h2><blockquote><p>webpack在使用webpack-dev-server时，如果你修改了打包原始文件中任意一项，打包会重新调用所有模块资源。为了实现资源的模块化刷新功能，需要使用HMR（Hot module repalcement）——热模块替换/模块热替换。<br>一个模块变化，只会打包这一个模块，而不是打包所有<br>帮我们极大提升构建速度</p></blockquote><h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><p>只需要在dev-server处开启hot:true就可以了</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">    <span class="comment">//设置路径</span></span><br><span class="line">    contentBase: resolve(__dirname, <span class="string">&#x27;build&#x27;</span>),</span><br><span class="line">    <span class="comment">//是否使用gzip进行压缩</span></span><br><span class="line">    compress: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">//服务端口号</span></span><br><span class="line">    port: <span class="number">3000</span>,</span><br><span class="line">    <span class="comment">//自动打开浏览</span></span><br><span class="line">    open: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">//当修改了webpack配置记得重启webpack服务</span></span><br><span class="line">    <span class="comment">//新配置要想生效必须重启webpack服务</span></span><br><span class="line">    hot:<span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="存在问题"><a href="#存在问题" class="headerlink" title="存在问题"></a>存在问题</h4><p><strong>CSS样式文件：</strong>可以使用HMR功能，style-loader内部实现</p><p><strong>JS文件：</strong>默认不能使用HMR功能 –》需要修改js代码，添加支持mhr功能的代码</p><p><strong>HTML文件：</strong>默认不能使用HMR功能，同时导致html文件不能热更新。在创建项目时只会创建1个html文件，当改变js和css时，html一定会改，所以不需要HMR。</p><h4 id="解决策略"><a href="#解决策略" class="headerlink" title="解决策略"></a>解决策略</h4><p>html问题的解决措施为修改entry为数组并加入html文件,重启服务</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//入口起点</span></span><br><span class="line">entry: [<span class="string">&#x27;./src/js/index.js&#x27;</span>,<span class="string">&#x27;./src/index.html&#x27;</span>]</span><br></pre></td></tr></table></figure><p>js需要手动设置热更代码，只针对非入口文件的js来做。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="built_in">module</span>.hot)&#123;</span><br><span class="line"><span class="comment">//一旦发现开启热模块，就执行以下方法</span></span><br><span class="line"><span class="built_in">module</span>.hot.accept(<span class="string">&#x27;./print.js&#x27;</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//方法会监听print.js的变化，其他默认不会打包构建</span></span><br><span class="line">    <span class="comment">//会执行后面的回调函数</span></span><br><span class="line">print()</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="🎉代码调试优化-source-map？"><a href="#🎉代码调试优化-source-map？" class="headerlink" title="🎉代码调试优化-source-map？"></a>🎉代码调试优化-source-map？</h2><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>source-map是一种提供源代码到构建后代码映射的技术。</p><p>如果构建后的代码出错了，通过映射关系可以追踪到源代码的错误。</p><h4 id="基本使用方法"><a href="#基本使用方法" class="headerlink" title="基本使用方法"></a>基本使用方法</h4><p>只需加入devtool:’source-map’即可。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mode:<span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">devtool:<span class="string">&#x27;source-map&#x27;</span>,</span><br><span class="line"><span class="comment">//提供错误信息和源代码的错误未知</span></span><br></pre></td></tr></table></figure><h4 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">devtool:<span class="string">&#x27;xxx-source-map&#x27;</span></span><br><span class="line"><span class="comment">/*1.内联source-map文件，</span></span><br><span class="line"><span class="comment">嵌入js之中，</span></span><br><span class="line"><span class="comment">只会生成一个，</span></span><br><span class="line"><span class="comment">因此不会生成本地文件，构建速度更快</span></span><br><span class="line"><span class="comment">提供错误信息和源代码的错误位置</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">inline-source-map</span><br><span class="line"><span class="comment">/*2.外联source-map文件</span></span><br><span class="line"><span class="comment">提供错误信息和提示构建后代码错误位置</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">hidden-source-map</span><br><span class="line"><span class="comment">/*3.内联source-map文件，</span></span><br><span class="line"><span class="comment">会在每一个js文件后生成对应的source-map</span></span><br><span class="line"><span class="comment">都在eval函数之中</span></span><br><span class="line"><span class="comment">提供错误信息和提示构建后代码错误位置和哈希值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">eval</span>-source-map</span><br><span class="line"><span class="comment">//4.外联source-map文件</span></span><br><span class="line"><span class="comment">//只有错误信息，无源代码信息</span></span><br><span class="line">nosource-source-map</span><br><span class="line"><span class="comment">//5.外联source-map文件</span></span><br><span class="line"><span class="comment">//只精确到行而不是列</span></span><br><span class="line">cheap-source-map</span><br><span class="line">cheap-<span class="built_in">module</span>-source-map</span><br></pre></td></tr></table></figure><h4 id="具体使用方法"><a href="#具体使用方法" class="headerlink" title="具体使用方法"></a>具体使用方法</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//开发环境，速度快，调试更友好--》eval-source-map</span></span><br><span class="line">(<span class="built_in">eval</span>&gt;inline&gt;cheap...)</span><br><span class="line">速度最快：<span class="built_in">eval</span>-cheap-source-map</span><br><span class="line">调试最友好：source-map/cheap-<span class="built_in">module</span>-source-map/cheap-source-map</span><br><span class="line"><span class="comment">//生产环境，源代码要不要隐藏？调试要不要更友好</span></span><br><span class="line"><span class="comment">//生产环境内联会增大代码体积，所以不用内联</span></span><br><span class="line">nosource-source-map</span><br><span class="line">hidden-source-map</span><br><span class="line">--》source-map/cheap-<span class="built_in">module</span>-source-map</span><br></pre></td></tr></table></figure><h1 id="第七章生产环境webpack性能优化？"><a href="#第七章生产环境webpack性能优化？" class="headerlink" title="第七章生产环境webpack性能优化？"></a>第七章<strong>生产环境</strong>webpack性能优化？</h1><h2 id="🎉打包速度优化-oneOf？"><a href="#🎉打包速度优化-oneOf？" class="headerlink" title="🎉打包速度优化-oneOf？"></a>🎉打包速度优化-oneOf？</h2><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p>以下loader只会匹配一个。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">rules: [</span><br><span class="line">oneOf:[</span><br><span class="line">&#123;...&#125;,<span class="comment">//处理js的loader</span></span><br><span class="line">&#123;...&#125;,<span class="comment">//处理css的loader</span></span><br><span class="line">&#123;...&#125;,<span class="comment">//处理less的loader</span></span><br><span class="line">&#123;...&#125;,<span class="comment">//处理图片的loader</span></span><br><span class="line">&#123;...&#125;,<span class="comment">//处理其他文件的loader</span></span><br><span class="line">]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><p>当两个loader处理同一种文件类型时，把其中一个放在oneof外面。</p><h2 id="🎉打包速度优化-缓存？"><a href="#🎉打包速度优化-缓存？" class="headerlink" title="🎉打包速度优化-缓存？"></a>🎉打包速度优化-缓存？</h2><h4 id="babel缓存"><a href="#babel缓存" class="headerlink" title="babel缓存"></a><strong>babel缓存</strong></h4><p>开启babel缓存,第二次构建时会读取第一次的缓存。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cacheDirectory:<span class="literal">true</span></span><br></pre></td></tr></table></figure><h4 id="基本的服务器代码"><a href="#基本的服务器代码" class="headerlink" title="基本的服务器代码"></a><strong>基本的服务器代码</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">服务器代码</span></span><br><span class="line"><span class="comment">启动服务器指令：</span></span><br><span class="line"><span class="comment">nodemon server.js</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)；</span><br><span class="line"><span class="keyword">const</span> app = express()；</span><br><span class="line">app.use(express.static(<span class="string">&#x27;build&#x27;</span>,&#123;<span class="attr">maxAge</span>:<span class="number">1000</span>*<span class="number">3600</span>&#125;));</span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><h4 id="文件资源缓存"><a href="#文件资源缓存" class="headerlink" title="文件资源缓存"></a>文件资源缓存</h4><p><strong>方案一 hash</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用哈希值，在webpack构建时将filename附上哈希值</span></span><br><span class="line"><span class="comment">//问题：这样会导致所有缓存失效</span></span><br><span class="line"><span class="comment">//js和css哈希值一样</span></span><br><span class="line">filename:built.[hash:<span class="number">10</span>].js</span><br><span class="line">filename:built.[hash:<span class="number">10</span>].css</span><br></pre></td></tr></table></figure><p><strong>方案二 chunkhash</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据chunk生成哈希值，如果打包来源于同一个chunk，那么哈希值就一样</span></span><br><span class="line"><span class="comment">//问题：js和css哈希值一样</span></span><br><span class="line"><span class="comment">//原因：因为css是在js中被引入的，所以同属于一个chunk</span></span><br><span class="line">filename:built.[chunkhash:<span class="number">10</span>].js</span><br><span class="line">filename:built.[chunkhash:<span class="number">10</span>].css</span><br></pre></td></tr></table></figure><p><strong>最终方案三 contenthash</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据文件内容生成哈希值，如果文件内容不一样，那么哈希值就不一样</span></span><br><span class="line">filename:built.[contenthash:<span class="number">10</span>].js</span><br><span class="line">filename:built.[contenthash:<span class="number">10</span>].css</span><br></pre></td></tr></table></figure><h2 id="🎉打包速度优化-多进程打包？"><a href="#🎉打包速度优化-多进程打包？" class="headerlink" title="🎉打包速度优化-多进程打包？"></a>🎉打包速度优化-多进程打包？</h2><h4 id="安装-5"><a href="#安装-5" class="headerlink" title="安装"></a>安装</h4><p>使用前需要安装html-webpack-plugin。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i th<span class="built_in">read-loader</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h4 id="使用-2"><a href="#使用-2" class="headerlink" title="使用"></a>使用</h4><p>在use中引入</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use:[thread-loader,xxx-loader]</span><br></pre></td></tr></table></figure><h4 id="使用多进程打包的利弊"><a href="#使用多进程打包的利弊" class="headerlink" title="使用多进程打包的利弊"></a>使用多进程打包的利弊</h4><p>启动需要600毫秒，进程通信也具有时间成本。如果本身打包时间较短，无需使用多进程打包。</p><p>只有工作时间较长才需要。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">loader</span>:thread-loader，</span><br><span class="line">options:&#123;</span><br><span class="line">  workers:<span class="number">2</span>, <span class="comment">//进程2个</span></span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure><h2 id="🎉代码性能优化-tree-shaking？"><a href="#🎉代码性能优化-tree-shaking？" class="headerlink" title="🎉代码性能优化-tree-shaking？"></a>🎉代码性能优化-tree-shaking？</h2><h4 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h4><p>将代码中未经应用的代码去除。</p><p>前提：1.使用ES6模块化 2.开启production环境</p><p>作用：减少代码体积</p><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>在package.json中配置</p><p>“sodeEffects“:false 所有代码都没有副作用（都可以进行tree shaking）</p><p>问题：可能会把css/其他文件文件干掉</p><p>解决：</p><p>“sodeEffects“:[“*.css”]</p><h2 id="🎉代码性能优化-代码分割code-split？"><a href="#🎉代码性能优化-代码分割code-split？" class="headerlink" title="🎉代码性能优化-代码分割code split？"></a>🎉代码性能优化-代码分割code split？</h2><h4 id="多入口出口文件的重命名"><a href="#多入口出口文件的重命名" class="headerlink" title="多入口出口文件的重命名"></a>多入口出口文件的重命名</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将entry修改为对象，并对入口进行命名</span></span><br><span class="line"><span class="comment">//在filename处增加[name]</span></span><br><span class="line">entry: &#123;</span><br><span class="line">    index:<span class="string">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class="line">    main:<span class="string">&#x27;./src/index.html&#x27;</span>,</span><br><span class="line">    text:<span class="string">&#x27;./src/js/text.js&#x27;</span>,</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//输出</span></span><br><span class="line">output: &#123;</span><br><span class="line">    <span class="comment">//输出文件名</span></span><br><span class="line">    filename: <span class="string">&quot;js/[name].built.[contenthash:10].js&quot;</span>,</span><br><span class="line">    <span class="comment">//__dirname是nodejs的变量，代表当前文件的目录绝对路径</span></span><br><span class="line">    path: resolve(__dirname, <span class="string">&#x27;build&#x27;</span>),</span><br><span class="line">    <span class="comment">//公共路径为当前路径</span></span><br><span class="line">    publicPath: <span class="string">&#x27;./&#x27;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h4 id="多文件处理"><a href="#多文件处理" class="headerlink" title="多文件处理"></a>多文件处理</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.optimization配置可以将node_modules中的代码单独打包成一个chunk最终输出</span></span><br><span class="line"><span class="comment">//2.optimization配置会自动分析多入口chunk中，有没有公共的代码</span></span><br><span class="line"><span class="comment">//如果有会打包成单独的一个chunk</span></span><br><span class="line">optimization:&#123;</span><br><span class="line">  splitChunks:&#123;</span><br><span class="line">    chunks:<span class="string">&#x27;all&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//3.通过js代码，让某个文件被单独打包成一个chunk</span></span><br><span class="line"><span class="comment">//import动态导入语法：能将某个文件单独打包</span></span><br><span class="line"><span class="comment">//通过注释可以给单独打包的Chunk起名字</span></span><br><span class="line"><span class="keyword">import</span> (<span class="comment">/* webpackChunkName:&#x27;test&#x27;*/</span><span class="string">&#x27;./text&#x27;</span>)</span><br><span class="line">.then(<span class="function">(<span class="params">result</span>) =&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result)</span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;加载失败&#x27;</span>)</span><br><span class="line">  &#125;）</span><br></pre></td></tr></table></figure><h2 id="🎉代码性能优化-lazy-loading？"><a href="#🎉代码性能优化-lazy-loading？" class="headerlink" title="🎉代码性能优化-lazy loading？"></a>🎉代码性能优化-lazy loading？</h2><h4 id="概念-2"><a href="#概念-2" class="headerlink" title="概念"></a>概念</h4><p>当需要加载某个js的时候再进行加载</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//import &#123;mul&#125; form &#x27;./test&#x27;</span></span><br><span class="line"><span class="comment">//这里是直接加载的方法</span></span><br><span class="line"><span class="comment">//这里是懒加载</span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="comment">//这里的webPrefetch是预加载的意思，会等其他资源加载完毕再加载预加载资源</span></span><br><span class="line"><span class="comment">//正常加载我们可以理解为并行加载(同一时间加载多个文件)</span></span><br><span class="line">  <span class="keyword">import</span> (<span class="comment">/* webpackChunkName:&#x27;test&#x27;,webPrefetch:true*/</span><span class="string">&#x27;./text&#x27;</span>)</span><br><span class="line">.then(<span class="function">(<span class="params">&#123;mul&#125;</span>) =&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(mul(<span class="number">4</span>,<span class="number">5</span>))</span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;加载失败&#x27;</span>)</span><br><span class="line">  &#125;）</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="🎉代码性能优化-PWA？"><a href="#🎉代码性能优化-PWA？" class="headerlink" title="🎉代码性能优化-PWA？"></a>🎉代码性能优化-PWA？</h2><h4 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h4><p>渐进式网络开发应用程序（离线可访问技术）</p><p>workbox –》 workbox-webpack-plugin</p><h4 id="安装-6"><a href="#安装-6" class="headerlink" title="安装"></a>安装</h4><p>使用前需要安装html-webpack-plugin。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i workbox<span class="literal">-webpack</span><span class="literal">-plugin</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h4 id="引入-1"><a href="#引入-1" class="headerlink" title="引入"></a>引入</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> WorkboxWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;workbox-webpack-plugin&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="修改配置-5"><a href="#修改配置-5" class="headerlink" title="修改配置"></a>修改配置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> WorkboxWebpackPlugin.GenerateSW(&#123;</span><br><span class="line"> clientsClaim:<span class="literal">true</span>,</span><br><span class="line"> skipWaiting:<span class="literal">true</span></span><br><span class="line"> <span class="comment">//1.帮助sw快速启动</span></span><br><span class="line"> <span class="comment">//2.删除旧的sw</span></span><br><span class="line"> <span class="comment">//生成sw配置文件 </span></span><br><span class="line">&#125;）</span><br></pre></td></tr></table></figure><h4 id="注册sw"><a href="#注册sw" class="headerlink" title="注册sw"></a>注册sw</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="string">&#x27;serviceWorker&#x27;</span> <span class="keyword">in</span> navigator)&#123;</span><br><span class="line">  windows.addEventListener(<span class="string">&#x27;load&#x27;</span>,<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    navigator.serviceWorker.register(<span class="string">&#x27;/service-worker&#x27;</span>);</span><br><span class="line">    .then(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;SW注册失败&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">.catch(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;SW注册失败&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)&#125;</span><br></pre></td></tr></table></figure><h4 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.eslint 不认识window、 navigator等变量。</span></span><br><span class="line"><span class="comment">//解决：需要修改package.json中的eslintConfig配置。</span></span><br><span class="line"><span class="string">&quot;env&quot;</span>：&#123;</span><br><span class="line">  <span class="string">&quot;browser&quot;</span>:<span class="literal">true</span><span class="comment">//支持浏览器变量</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.sw代码必须运行在服务器上</span></span><br><span class="line"><span class="comment">//--》 nodeJS代码</span></span><br><span class="line"><span class="comment">//--》</span></span><br><span class="line"> cnpm i serve -g</span><br><span class="line"> serve -s build 启动服务器，将build下所有资源作为静态资源暴露</span><br><span class="line"> </span><br></pre></td></tr></table></figure><h2 id="🎉代码性能优化-externals？"><a href="#🎉代码性能优化-externals？" class="headerlink" title="🎉代码性能优化-externals？"></a>🎉代码性能优化-externals？</h2><h4 id="概念-3"><a href="#概念-3" class="headerlink" title="概念"></a><strong>概念</strong></h4><p><strong>将需要用cdn资源引入的js屏蔽掉。</strong></p><h4 id="方法-1"><a href="#方法-1" class="headerlink" title="方法"></a><strong>方法</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">externals: &#123;</span><br><span class="line">  <span class="comment">// 拒绝jQuery被打包进来(通过cdn引入，速度会快一些)</span></span><br><span class="line">  <span class="comment">// 忽略的库名 -- npm包名</span></span><br><span class="line">  <span class="comment">//需要手动引入cdn链接</span></span><br><span class="line">  jquery: <span class="string">&#x27;jQuery&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="🎉代码性能优化-DLL？"><a href="#🎉代码性能优化-DLL？" class="headerlink" title="🎉代码性能优化-DLL？"></a>🎉代码性能优化-DLL？</h2><h4 id="概念-4"><a href="#概念-4" class="headerlink" title="概念"></a>概念</h4><p>dll：让某些库单独打包，后直接引入到 build 中。可以在 code split 分割出 node_modules 后再用 dll 更细的分割，优化代码运行的性能。</p><h4 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  node_modules的库会打包到一起，但是很多库的时候打包输出的js文件就太大了</span></span><br><span class="line"><span class="comment">  使用dll技术，对某些库（第三方库：jquery、react、vue...）进行单独打包</span></span><br><span class="line"><span class="comment">  当运行webpack时，默认查找webpack.config.js配置文件</span></span><br><span class="line"><span class="comment">  需求：需要运行webpack.dll.js文件</span></span><br><span class="line"><span class="comment">    --&gt; webpack --config webpack.dll.js（运行这个指令表示以这个配置文件打包）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> &#123; resolve &#125; = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    <span class="comment">// 最终打包生成的[name] --&gt; jquery</span></span><br><span class="line">    <span class="comment">// [&#x27;jquery] --&gt; 要打包的库是jquery</span></span><br><span class="line">    jquery: [<span class="string">&#x27;jquery&#x27;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    <span class="comment">// 输出出口指定</span></span><br><span class="line">    filename: <span class="string">&#x27;[name].js&#x27;</span>, <span class="comment">// name就是jquery</span></span><br><span class="line">    path: resolve(__dirname, <span class="string">&#x27;dll&#x27;</span>), <span class="comment">// 打包到dll目录下</span></span><br><span class="line">    library: <span class="string">&#x27;[name]_[hash]&#x27;</span>, <span class="comment">// 打包的库里面向外暴露出去的内容叫什么名字</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">// 打包生成一个manifest.json --&gt; 提供jquery的映射关系（告诉webpack：jquery之后不需要再打包和暴露内容的名称）</span></span><br><span class="line">    <span class="keyword">new</span> webpack.DllPlugin(&#123;</span><br><span class="line">      name: <span class="string">&#x27;[name]_[hash]&#x27;</span>, <span class="comment">// 映射库的暴露的内容名称</span></span><br><span class="line">      path: resolve(__dirname, <span class="string">&#x27;dll/manifest.json&#x27;</span>) <span class="comment">// 输出文件路径</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  mode: <span class="string">&#x27;production&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>webpack.config.js 配置：(告诉 webpack 不需要再打包 jquery，并将之前打包好的 jquery 跟其他打包好的资源一同输出到 build 目录下)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入插件</span></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> AddAssetHtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;add-asset-html-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="comment">// plugins中配置：</span></span><br><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">    template: <span class="string">&#x27;./src/index.html&#x27;</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="comment">// 告诉webpack哪些库不参与打包，同时使用时的名称也得变</span></span><br><span class="line">  <span class="keyword">new</span> webpack.DllReferencePlugin(&#123;</span><br><span class="line">    manifest: resolve(__dirname, <span class="string">&#x27;dll/manifest.json&#x27;</span>)</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="comment">// 将某个文件打包输出到build目录下，并在html中自动引入该资源</span></span><br><span class="line">  <span class="keyword">new</span> AddAssetHtmlWebpackPlugin(&#123;</span><br><span class="line">    filepath: resolve(__dirname, <span class="string">&#x27;dll/jquery.js&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">],</span><br></pre></td></tr></table></figure><h1 id="第八章webpack配置详解？"><a href="#第八章webpack配置详解？" class="headerlink" title="第八章webpack配置详解？"></a>第八章webpack配置详解？</h1><h2 id="🎉entry？"><a href="#🎉entry？" class="headerlink" title="🎉entry？"></a>🎉entry？</h2><h4 id="string类型"><a href="#string类型" class="headerlink" title="string类型"></a>string类型</h4><p>–&gt; ‘./src/index.js’，单入口</p><p>打包形成一个 chunk。 输出一个 bundle 文件。此时 chunk 的名称默认是 main。</p><h4 id="array-类型"><a href="#array-类型" class="headerlink" title="array 类型"></a>array 类型</h4><p>–&gt; [‘./src/index.js’, ‘./src/add.js’]，多入口</p><p>所有入口文件最终只会形成一个 chunk，输出出去只有一个 bundle 文件。</p><p>（一般只用在 HMR 功能中让 html 热更新生效）。</p><h4 id="object类型"><a href="#object类型" class="headerlink" title="object类型"></a>object类型</h4><p>多入口，有几个入口文件就形成几个 chunk，输出几个 bundle 文件，此时 chunk 的名称是 key 值。</p><p>–&gt; 特殊用法：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">entry: &#123;</span><br><span class="line">  <span class="comment">// 最终只会形成一个chunk, 输出出去只有一个bundle文件。</span></span><br><span class="line">  index: [<span class="string">&#x27;./src/index.js&#x27;</span>, <span class="string">&#x27;./src/count.js&#x27;</span>], </span><br><span class="line">  <span class="comment">// 形成一个chunk，输出一个bundle文件。</span></span><br><span class="line">  add: <span class="string">&#x27;./src/add.js&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="🎉output？"><a href="#🎉output？" class="headerlink" title="🎉output？"></a>🎉output？</h2><h4 id="配置-2"><a href="#配置-2" class="headerlink" title="配置"></a>配置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> output: &#123;</span><br><span class="line">  <span class="comment">// 文件名称（指定名称+哈希值+目录）</span></span><br><span class="line">  filename: <span class="string">&#x27;js/[name].[contenthash:10].js&#x27;</span>,</span><br><span class="line">  <span class="comment">// 输出文件目录（将来所有资源输出的公共目录）</span></span><br><span class="line">  path: resolve(__dirname, <span class="string">&#x27;build&#x27;</span>),</span><br><span class="line">  <span class="comment">// 所有资源引入公共路径前缀 --&gt; &#x27;imgs/a.jpg&#x27; --&gt; &#x27;/imgs/a.jpg&#x27;</span></span><br><span class="line">  publicPath: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">  chunkFilename: <span class="string">&#x27;js/[name]..[contenthash:10]_chunk.js&#x27;</span>, <span class="comment">// 指定非入口chunk的名称</span></span><br><span class="line">  library: <span class="string">&#x27;[name].[contenthash:10]&#x27;</span>, <span class="comment">// 打包整个库后向外暴露的变量名</span></span><br><span class="line">  libraryTarget: <span class="string">&#x27;window&#x27;</span> <span class="comment">// 变量名添加到哪个上 browser：window</span></span><br><span class="line">  <span class="comment">// libraryTarget: &#x27;global&#x27; // node：global</span></span><br><span class="line">  <span class="comment">// libraryTarget: &#x27;commonjs&#x27; // conmmonjs模块 exports</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="🎉module？"><a href="#🎉module？" class="headerlink" title="🎉module？"></a>🎉module？</h2><h4 id="配置-3"><a href="#配置-3" class="headerlink" title="配置"></a>配置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    <span class="comment">// loader的配置</span></span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">      <span class="comment">// 多个loader用use</span></span><br><span class="line">      use: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      <span class="comment">// 排除node_modules下的js文件</span></span><br><span class="line">      exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">      <span class="comment">// 只检查src下的js文件</span></span><br><span class="line">      include: resolve(__dirname, <span class="string">&#x27;src&#x27;</span>),</span><br><span class="line">      enforce: <span class="string">&#x27;pre&#x27;</span>, <span class="comment">// 优先执行</span></span><br><span class="line">      <span class="comment">// enforce: &#x27;post&#x27;, // 延后执行</span></span><br><span class="line">      <span class="comment">// 单个loader用loader</span></span><br><span class="line">      loader: <span class="string">&#x27;eslint-loader&#x27;</span>,</span><br><span class="line">      options: &#123;&#125; <span class="comment">// 指定配置选项</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// 以下配置只会生效一个</span></span><br><span class="line">      oneOf: []</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="🎉module？-1"><a href="#🎉module？-1" class="headerlink" title="🎉module？"></a>🎉module？</h2><h4 id="配置-4"><a href="#配置-4" class="headerlink" title="配置"></a>配置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解析模块的规则</span></span><br><span class="line">resolve: &#123;</span><br><span class="line">  <span class="comment">// 配置解析模块路径别名: 优点：当目录层级很复杂时，简写路径；缺点：路径不会提示</span></span><br><span class="line">  alias: &#123;</span><br><span class="line">    $css: resolve(__dirname, <span class="string">&#x27;src/css&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置省略文件路径的后缀名（引入时就可以不写文件后缀名了）</span></span><br><span class="line">  extensions: [<span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.json&#x27;</span>, <span class="string">&#x27;.jsx&#x27;</span>, <span class="string">&#x27;.css&#x27;</span>],</span><br><span class="line">  <span class="comment">// 告诉 webpack 解析模块应该去找哪个目录</span></span><br><span class="line">  modules: [resolve(__dirname, <span class="string">&#x27;../../node_modules&#x27;</span>), <span class="string">&#x27;node_modules&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样配置后，引入文件就可以这样简写：<code>import &#39;$css/index&#39;;</code></p><h2 id="🎉devServer？"><a href="#🎉devServer？" class="headerlink" title="🎉devServer？"></a>🎉devServer？</h2><h4 id="配置-5"><a href="#配置-5" class="headerlink" title="配置"></a>配置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">  <span class="comment">// 运行代码所在的目录</span></span><br><span class="line">  contentBase: resolve(__dirname, <span class="string">&#x27;build&#x27;</span>),</span><br><span class="line">  <span class="comment">// 监视contentBase目录下的所有文件，一旦文件变化就会reload</span></span><br><span class="line">  watchContentBase: <span class="literal">true</span>,</span><br><span class="line">  watchOptions: &#123;</span><br><span class="line">    <span class="comment">// 忽略文件</span></span><br><span class="line">    ignored: <span class="regexp">/node_modules/</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 启动gzip压缩</span></span><br><span class="line">  compress: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// 端口号</span></span><br><span class="line">  port: <span class="number">5000</span>,</span><br><span class="line">  <span class="comment">// 域名</span></span><br><span class="line">  host: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">  <span class="comment">// 自动打开浏览器</span></span><br><span class="line">  open: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// 开启HMR功能</span></span><br><span class="line">  hot: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// 不要显示启动服务器日志信息</span></span><br><span class="line">  clientLogLevel: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">  <span class="comment">// 除了一些基本信息外，其他内容都不要显示</span></span><br><span class="line">  quiet: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// 如果出错了，不要全屏提示</span></span><br><span class="line">  overlay: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// 服务器代理，--&gt; 解决开发环境跨域问题</span></span><br><span class="line">  proxy: &#123;</span><br><span class="line">    <span class="comment">// 一旦devServer(5000)服务器接收到/api/xxx的请求，就会把请求转发到另外一个服务器3000</span></span><br><span class="line">    <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">      target: <span class="string">&#x27;http://localhost:3000&#x27;</span>,</span><br><span class="line">      <span class="comment">// 发送请求时，请求路径重写：将/api/xxx --&gt; /xxx （去掉/api）</span></span><br><span class="line">      pathRewrite: &#123;</span><br><span class="line">        <span class="string">&#x27;^/api&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中，跨域问题：同源策略中不同的协议、端口号、域名就会产生跨域。<br>正常的浏览器和服务器之间有跨域，但是服务器之间没有跨域。代码通过代理服务器运行，所以浏览器和代理服务器之间没有跨域，浏览器把请求发送到代理服务器上，代理服务器替你转发到另外一个服务器上，服务器之间没有跨域，所以请求成功。代理服务器再把接收到的响应响应给浏览器。这样就解决开发环境下的跨域问题。</p><p>contenthash 缓存会导致一个问题：修改 a 文件导致 b 文件 contenthash 变化。</p><p>因为在 index.js 中引入 a.js，打包后 index.js 中记录了 a.js 的 hash 值，而 a.js 改变，其重新打包后的 hash 改变，导致 index.js 文件内容中记录的 a.js 的 hash 也改变，从而重新打包后 index.js 的 hash 值也会变，这样就会使缓存失效。（改变的是a.js文件但是 index.js 文件的 hash 值也改变了）</p><p>解决办法：runtimeChunk –&gt; 将当前模块记录其他模块的 hash 单独打包为一个文件 runtime，这样 a.js 的 hash 改变只会影响 runtime 文件，不会影响到 index.js 文件</p><h2 id="🎉module？-2"><a href="#🎉module？-2" class="headerlink" title="🎉module？"></a>🎉module？</h2><h4 id="配置-6"><a href="#配置-6" class="headerlink" title="配置"></a>配置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">  filename: <span class="string">&#x27;js/[name].[contenthash:10].js&#x27;</span>,</span><br><span class="line">  path: resolve(__dirname, <span class="string">&#x27;build&#x27;</span>),</span><br><span class="line">  chunkFilename: <span class="string">&#x27;js/[name].[contenthash:10]_chunk.js&#x27;</span> <span class="comment">// 指定非入口文件的其他chunk的名字加_chunk</span></span><br><span class="line">&#125;,</span><br><span class="line">optimization: &#123;</span><br><span class="line">  splitChunks: &#123;</span><br><span class="line">    chunks: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">    <span class="comment">/* 以下都是splitChunks默认配置，可以不写</span></span><br><span class="line"><span class="comment">    miniSize: 30 * 1024, // 分割的chunk最小为30kb（大于30kb的才分割）</span></span><br><span class="line"><span class="comment">    maxSize: 0, // 最大没有限制</span></span><br><span class="line"><span class="comment">    minChunks: 1, // 要提取的chunk最少被引用1次</span></span><br><span class="line"><span class="comment">    maxAsyncRequests: 5, // 按需加载时并行加载的文件的最大数量为5</span></span><br><span class="line"><span class="comment">    maxInitialRequests: 3, // 入口js文件最大并行请求数量</span></span><br><span class="line"><span class="comment">    automaticNameDelimiter: &#x27;~&#x27;, // 名称连接符</span></span><br><span class="line"><span class="comment">    name: true, // 可以使用命名规则</span></span><br><span class="line"><span class="comment">    cacheGroups: &#123; // 分割chunk的组</span></span><br><span class="line"><span class="comment">      vendors: &#123;</span></span><br><span class="line"><span class="comment">        // node_modules中的文件会被打包到vendors组的chunk中，--&gt; vendors~xxx.js</span></span><br><span class="line"><span class="comment">        // 满足上面的公共规则，大小超过30kb、至少被引用一次</span></span><br><span class="line"><span class="comment">        test: /[\\/]node_modules[\\/]/,</span></span><br><span class="line"><span class="comment">        // 优先级</span></span><br><span class="line"><span class="comment">        priority: -10</span></span><br><span class="line"><span class="comment">      &#125;,</span></span><br><span class="line"><span class="comment">      default: &#123;</span></span><br><span class="line"><span class="comment">        // 要提取的chunk最少被引用2次</span></span><br><span class="line"><span class="comment">        minChunks: 2,</span></span><br><span class="line"><span class="comment">        prority: -20,</span></span><br><span class="line"><span class="comment">        // 如果当前要打包的模块和之前已经被提取的模块是同一个，就会复用，而不是重新打包</span></span><br><span class="line"><span class="comment">        reuseExistingChunk: true</span></span><br><span class="line"><span class="comment">      &#125;</span></span><br><span class="line"><span class="comment">    &#125; */</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 将index.js记录的a.js的hash值单独打包到runtime文件中</span></span><br><span class="line">  runtimeChunk: &#123;</span><br><span class="line">    name: <span class="function"><span class="params">entrypoint</span> =&gt;</span> <span class="string">`runtime-<span class="subst">$&#123;entrypoint.name&#125;</span>`</span></span><br><span class="line">  &#125;,</span><br><span class="line">  minimizer: [</span><br><span class="line">    <span class="comment">// 配置生产环境的压缩方案：js/css</span></span><br><span class="line">    <span class="keyword">new</span> TerserWebpackPlugin(&#123;</span><br><span class="line">      <span class="comment">// 开启缓存</span></span><br><span class="line">      cache: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">// 开启多进程打包</span></span><br><span class="line">      parallel: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">// 启用sourceMap(否则会被压缩掉)</span></span><br><span class="line">      sourceMap: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="第九章webpack5的新特性？"><a href="#第九章webpack5的新特性？" class="headerlink" title="第九章webpack5的新特性？"></a>第九章webpack5的新特性？</h1><h2 id="🎉重点内容？"><a href="#🎉重点内容？" class="headerlink" title="🎉重点内容？"></a>🎉重点内容？</h2><p>此版本重点关注以下内容:</p><ul><li>通过持久缓存提高构建性能.</li><li>使用更好的算法和默认值来改善长期缓存.</li><li>通过更好的树摇和代码生成来改善捆绑包大小.</li><li>清除处于怪异状态的内部结构，同时在 v4 中实现功能而不引入任何重大更改.</li><li>通过引入重大更改来为将来的功能做准备，以使我们能够尽可能长时间地使用 v5.</li></ul><h2 id="🎉下载？（截止2020年11月已经可以直接下了）"><a href="#🎉下载？（截止2020年11月已经可以直接下了）" class="headerlink" title="🎉下载？（截止2020年11月已经可以直接下了）"></a>🎉下载？（截止2020年11月已经可以直接下了）</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cnpm</span> i webpack webpack<span class="literal">-cli</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h2 id="🎉自动删除-Node-js-Polyfills"><a href="#🎉自动删除-Node-js-Polyfills" class="headerlink" title="🎉自动删除 Node.js Polyfills?"></a>🎉自动删除 Node.js Polyfills?</h2><p>早期，webpack 的目标是允许在浏览器中运行大多数 node.js 模块，但是模块格局发生了变化，许多模块用途现在主要是为前端目的而编写的。webpack &lt;= 4 附带了许多 node.js 核心模块的 polyfill，一旦模块使用任何核心模块（即 crypto 模块），这些模块就会自动应用。</p><p>尽管这使使用为 node.js 编写的模块变得容易，但它会将这些巨大的 polyfill 添加到包中。在许多情况下，这些 polyfill 是不必要的。</p><p>webpack 5 会自动停止填充这些核心模块，并专注于与前端兼容的模块。</p><p>迁移：</p><ul><li>尽可能尝试使用与前端兼容的模块。</li><li>可以为 node.js 核心模块手动添加一个 polyfill。错误消息将提示如何实现该目标。</li></ul><p>Chunk 和模块 ID</p><p>添加了用于长期缓存的新算法。在生产模式下默认情况下启用这些功能。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chunkIds: <span class="string">&quot;deterministic&quot;</span>, <span class="attr">moduleIds</span>: <span class="string">&quot;deterministic&quot;</span></span><br></pre></td></tr></table></figure><h2 id="🎉Chunk-ID？"><a href="#🎉Chunk-ID？" class="headerlink" title="🎉Chunk ID？"></a>🎉Chunk ID？</h2><p>你可以不用使用<code>import(/* webpackChunkName: &quot;name&quot; */ &quot;module&quot;)</code>在开发环境来为 chunk 命名，生产环境还是有必要的</p><p>webpack 内部有 chunk 命名规则，不再是以 id(0, 1, 2)命名了</p><h2 id="🎉Tree-Shaking？"><a href="#🎉Tree-Shaking？" class="headerlink" title="🎉Tree Shaking？"></a>🎉Tree Shaking？</h2><ol><li>webpack 现在能够处理对嵌套模块的 tree shaking<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// inner.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="comment">// module.js</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> inner <span class="keyword">from</span> <span class="string">&#x27;./inner&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; inner &#125;;</span><br><span class="line"><span class="comment">// user.js</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="built_in">module</span> <span class="keyword">from</span> <span class="string">&#x27;./module&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">module</span>.inner.a);</span><br></pre></td></tr></table></figure> 在生产环境中, inner 模块暴露的<code>b</code>会被删除</li><li>webpack 现在能够多个模块之前的关系<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; something &#125; <span class="keyword">from</span> <span class="string">&#x27;./something&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">usingSomething</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> something;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> usingSomething();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 当设置了<code>&quot;sideEffects&quot;: false</code>时，一旦发现<code>test</code>方法没有使用，不但删除<code>test</code>，还会删除<code>&quot;./something&quot;</code></li><li>webpack 现在能处理对 Commonjs 的 tree shaking<h2 id="🎉Output？"><a href="#🎉Output？" class="headerlink" title="🎉Output？"></a>🎉Output？</h2></li></ol><p>webpack 4 默认只能输出 ES5 代码</p><p>webpack 5 开始新增一个属性 output.ecmaVersion, 可以生成 ES5 和 ES6 / ES2015 代码.</p><p>如：<code>output.ecmaVersion: 2015</code></p><p>SplitChunk</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack4</span></span><br><span class="line">minSize: <span class="number">30000</span>;</span><br><span class="line"><span class="comment">// webpack5</span></span><br><span class="line">minSize: &#123;</span><br><span class="line">  javascript: <span class="number">30000</span>,</span><br><span class="line">  style: <span class="number">50000</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="🎉Caching？"><a href="#🎉Caching？" class="headerlink" title="🎉Caching？"></a>🎉Caching？</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置缓存</span></span><br><span class="line">cache: &#123;</span><br><span class="line">  <span class="comment">// 磁盘存储</span></span><br><span class="line">  type: <span class="string">&quot;filesystem&quot;</span>,</span><br><span class="line">  buildDependencies: &#123;</span><br><span class="line">    <span class="comment">// 当配置修改时，缓存失效</span></span><br><span class="line">    config: [__filename]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>缓存将存储到<code>node_modules/.cache/webpack</code></p><h2 id="🎉监视输出文件？"><a href="#🎉监视输出文件？" class="headerlink" title="🎉监视输出文件？"></a>🎉监视输出文件？</h2><p>之前 webpack 总是在第一次构建时输出全部文件，但是监视重新构建时会只更新修改的文件。</p><p>此次更新在第一次构建时会找到输出文件看是否有变化，从而决定要不要输出全部文件。</p><h2 id="🎉默认值？"><a href="#🎉默认值？" class="headerlink" title="🎉默认值？"></a>🎉默认值？</h2><ul><li><code>entry: &quot;./src/index.js</code></li><li><code>output.path: path.resolve(__dirname, &quot;dist&quot;)</code></li><li><code>output.filename: &quot;[name].js&quot;</code></li></ul><blockquote><p>尚硅谷2020最新版Webpack5实战教程(从入门到精通)<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1e7411j7T5?p=1">https://www.bilibili.com/video/BV1e7411j7T5?p=1</a></p></blockquote></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="mailto:undefined">しゅふがく</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="http://zfe.space/2020/11/10/2020-11-10/">http://zfe.space/2020/11/10/2020-11-10/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://zfe.space" target="_blank">小冰博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%AD%A6%E4%B9%A0/">学习</a><a class="post-meta__tags" href="/tags/vuejs/">vuejs</a><a class="post-meta__tags" href="/tags/webpack/">webpack</a></div><div class="post_share"><div class="social-share" data-image="/images/letter/w.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer="defer"></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/images/wechat.JPG" target="_blank"><img class="post-qr-code-img" data-lazy-src="/images/wechat.JPG" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/images/alipay.JPG" target="_blank"><img class="post-qr-code-img" data-lazy-src="/images/alipay.JPG" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/11/11/2020-11-11/"><img class="prev-cover" data-lazy-src="/images/letter/v.png" onerror='onerror=null,src="/img/404.jpg"'><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">vue3.0学习 Day11</div></div></a></div><div class="next-post pull-right"><a href="/2020/11/09/2020-11-09/"><img class="next-cover" data-lazy-src="/images/letter/v.png" onerror='onerror=null,src="/img/404.jpg"'><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">vue3.0学习 Day10</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i> <span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2020/11/15/2020-11-15/" title="vue3.0学习 Day13"><img class="cover" data-lazy-src="/images/letter/v.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-15</div><div class="title">vue3.0学习 Day13</div></div></a></div><div><a href="/2020/11/14/2020-11-14/" title="vue3.0学习 Day12"><img class="cover" data-lazy-src="/images/letter/v.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-14</div><div class="title">vue3.0学习 Day12</div></div></a></div><div><a href="/2020/11/11/2020-11-11/" title="vue3.0学习 Day11"><img class="cover" data-lazy-src="/images/letter/v.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-11</div><div class="title">vue3.0学习 Day11</div></div></a></div><div><a href="/2020/11/09/2020-11-09/" title="vue3.0学习 Day10"><img class="cover" data-lazy-src="/images/letter/v.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-09</div><div class="title">vue3.0学习 Day10</div></div></a></div><div><a href="/2020/10/20/2020-10-21/" title="vue3.0学习 Day9"><img class="cover" data-lazy-src="/images/letter/v.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-20</div><div class="title">vue3.0学习 Day9</div></div></a></div><div><a href="/2020/10/15/2020-10-16-2/" title="vue3.0学习 Day8"><img class="cover" data-lazy-src="/images/letter/v.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-15</div><div class="title">vue3.0学习 Day8</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="/images/headimage.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"><div class="author-info__name">しゅふがく</div><div class="author-info__description">做个有梦想的人！</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">127</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">37</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div><a class="button--animated" id="card-info-btn" href="JavaScript:AddFavorite('https://zfe.space','小冰博客')"><i class="fas fa-bookmark"></i><span>收藏我的博客</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Zfour" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:499984532@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://weibo.com/xiuji941028" target="_blank" title="weibo"><i class="fab fa-weibo"></i></a><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;uin=499984532&amp;site=qq&amp;menu=yes" target="_blank" title="qq"><i class="fab fa-qq"></i></a><a class="social-icon" href="https://space.bilibili.com/1652398/" target="_blank" title="bilibili"><i class="fas fa-video"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">这是Z_4的2.0版本blog，基于Hexo框架的Butterfly主题搭建，于2020年8月6日上线。目前还在绝赞建站中。</div></div></div><div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="clock"><img v-if="clockshow == &quot;false&quot;" src="/images/loading.gif" style="height:120px;width:100%"><table class="clock" v-if="clockshow"><tbody><tr><td class="clockdate">{{date}}</td><td class="weatherimg" align="center" valign="middle"><img id="weatherimg" :src="weatherimg"></td><td class="temperature" align="center" valign="middle">{{temperature}}</td><td class="humidityimg"><img id="humidityimg" :src="humidityimg"></td><td class="humidity">{{humidity}}</td></tr><tr class="time"><td colspan="5">{{time}}</td></tr><tr><td class="usaqi" colspan="1"> <span>{{ip}}</span></td><td class="city" colspan="2">{{city}}</td><td class="daylight" colspan="2">{{daylight}}</td></tr></tbody></table></div></div></div></div></div><div class="card-widget card-recent-post"><div id="gamenews"><div class="card-content"><div class="item-headline"><i class="fas fa-cube"></i><span>ROLL资讯</span><i class="fas fa-retweet" @click="changetype(current)" style="float:right;margin-top:8px"></i></div><div class="newsbar"><span v-for="(type, index) in listtype" v-on:click="addClass(index)" v-bind:class="{ listtypeon:index==current}">{{type}}</span></div><div class="aside-list"><div class="aside-list-item" v-for="(news,index) in newsvue"><a class="thumbnail" href="javascript:void(0)" @click="getnewsdata(index)" :title="news.title"><img class="loaded" onerror='this.onerror=null,this.src="/img/404.jpg"' data-ll-status="loaded" :src="news.imgList[0]"></a><div class="content"><a class="title" href="javascript:void(0)" @click="getnewsdata(index)" :title="news.title">{{news.title}}</a><time>{{news.postTime}}</time></div></div></div></div><div id="newsmodal"><button class="modalclose" @click="hidemodle()">关闭</button><h2>{{newpostvue.title}}</h2><h4>{{newpostvue.ptime}} &nbsp;&nbsp; {{newpostvue.source}}</h4><div v-html="newpostvue.content"></div></div></div></div><div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>那年今日</span></div><div id="history-news" style="height:100px;overflow:hidden"><div id="history-card"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-Webpack%E7%AE%80%E4%BB%8B%EF%BC%9F"><span class="toc-number">1.</span> <span class="toc-text">第一章 Webpack简介？</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E4%BB%80%E4%B9%88%E6%98%AFWebpack%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">🎉什么是Webpack？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89webpack%E4%BA%94%E4%B8%AA%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">🎉webpack五个核心概念？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Entry"><span class="toc-number">1.2.1.</span> <span class="toc-text">Entry</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Output"><span class="toc-number">1.2.2.</span> <span class="toc-text">Output</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Loader"><span class="toc-number">1.2.3.</span> <span class="toc-text">Loader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Plugins"><span class="toc-number">1.2.4.</span> <span class="toc-text">Plugins</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mode"><span class="toc-number">1.2.5.</span> <span class="toc-text">Mode</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0Webpack-%E5%88%9D%E4%BD%93%E9%AA%8C%EF%BC%9F"><span class="toc-number">2.</span> <span class="toc-text">第二章Webpack 初体验？</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE%EF%BC%9F"><span class="toc-number">2.1.</span> <span class="toc-text">🎉初始化配置？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96-package-json%EF%BC%9A"><span class="toc-number">2.1.0.1.</span> <span class="toc-text">初始化 package.json：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85webpack%EF%BC%9A"><span class="toc-number">2.1.0.2.</span> <span class="toc-text">下载安装webpack：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E7%BC%96%E8%AF%91%E6%89%93%E5%8C%85%E5%BA%94%E7%94%A8%EF%BC%9F"><span class="toc-number">2.2.</span> <span class="toc-text">🎉编译打包应用？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%88%9D%E5%A7%8B%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">2.2.0.1.</span> <span class="toc-text">创建初始文件夹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E6%8C%87%E4%BB%A4"><span class="toc-number">2.2.0.2.</span> <span class="toc-text">打包指令</span></a></li></ol></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0Webpack-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE%EF%BC%9F"><span class="toc-number">3.</span> <span class="toc-text">第三章Webpack 开发环境的基本配置？</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89Webpack%E5%AE%89%E8%A3%85%EF%BC%9F"><span class="toc-number">3.1.</span> <span class="toc-text">🎉Webpack安装？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89Webpack%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9F"><span class="toc-number">3.2.</span> <span class="toc-text">🎉Webpack定义配置文件？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">3.3.</span><span class="toc-text"></span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0Webpack-%E6%89%93%E5%8C%85%E8%B5%84%E6%BA%90%EF%BC%9F"><span class="toc-number">4.</span> <span class="toc-text">第四章Webpack 打包资源？</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E6%89%93%E5%8C%85%E5%89%8D%E5%87%86%E5%A4%87%EF%BC%9F"><span class="toc-number">4.1.</span> <span class="toc-text">🎉打包前准备？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89Webpack%E6%89%93%E5%8C%85css-less%E6%A0%B7%E5%BC%8F%E8%B5%84%E6%BA%90%EF%BC%9F"><span class="toc-number">4.2.</span> <span class="toc-text">🎉Webpack打包css&#x2F;less样式资源？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#css%E6%89%93%E5%8C%85%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">4.2.1.</span> <span class="toc-text">css打包的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">4.2.1.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE"><span class="toc-number">4.2.1.2.</span> <span class="toc-text">修改配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#less%E6%89%93%E5%8C%85%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">4.2.2.</span> <span class="toc-text">less打包的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-1"><span class="toc-number">4.2.2.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE-1"><span class="toc-number">4.2.2.2.</span> <span class="toc-text">修改配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89Webpack%E6%89%93%E5%8C%85loader%E4%B8%8Eplugins%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">4.3.</span> <span class="toc-text">🎉Webpack打包loader与plugins的区别？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89Webpack%E6%89%93%E5%8C%85html%E5%92%8C%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90%EF%BC%9F"><span class="toc-number">4.4.</span> <span class="toc-text">🎉Webpack打包html和图片资源？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#html%E6%89%93%E5%8C%85%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">4.4.1.</span> <span class="toc-text">html打包的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-2"><span class="toc-number">4.4.1.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%85%A5"><span class="toc-number">4.4.1.2.</span> <span class="toc-text">引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE-2"><span class="toc-number">4.4.1.3.</span> <span class="toc-text">修改配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E6%89%93%E5%8C%85%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">4.4.2.</span> <span class="toc-text">图片打包的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%8A%A5%E9%94%99"><span class="toc-number">4.4.2.1.</span> <span class="toc-text">解决报错</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-3"><span class="toc-number">4.4.2.2.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE-3"><span class="toc-number">4.4.2.3.</span> <span class="toc-text">修改配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E5%85%B6%E4%BB%96%E8%B5%84%E6%BA%90%E7%9A%84%E6%89%93%E5%8C%85%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">4.5.</span> <span class="toc-text">🎉其他资源的打包的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-4"><span class="toc-number">4.5.0.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE-4"><span class="toc-number">4.5.0.2.</span> <span class="toc-text">修改配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E5%BC%80%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8-devServer%E9%85%8D%E7%BD%AE%EF%BC%9F"><span class="toc-number">4.6.</span> <span class="toc-text">🎉开发服务器_devServer配置？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%B8%E8%BD%BD%E4%B9%8B%E5%89%8D%E7%9A%84webpack-cli"><span class="toc-number">4.6.0.1.</span> <span class="toc-text">卸载之前的webpack-cli</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E7%AC%A6%E5%90%88%E4%BE%9D%E8%B5%96%E7%9A%84webpack-cli-webpack-dev-server%E6%9C%80%E6%96%B0%E7%89%88%E5%AF%B9%E5%BA%943-3%EF%BC%89"><span class="toc-number">4.6.0.2.</span> <span class="toc-text">安装符合依赖的webpack-cli(webpack-dev-server最新版对应3.3）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE%EF%BC%9A"><span class="toc-number">4.6.0.3.</span> <span class="toc-text">详细配置：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E6%9C%80%E7%BB%88%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%EF%BC%9F"><span class="toc-number">4.7.</span> <span class="toc-text">🎉最终开发环境配置？</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0Webpack-%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE%EF%BC%9F"><span class="toc-number">5.</span> <span class="toc-text">第五章Webpack 生产环境的基本配置？</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E6%8F%90%E5%8F%96css%E6%88%90%E4%B8%BA%E5%8D%95%E4%B8%AA%E6%96%87%E4%BB%B6%EF%BC%9F"><span class="toc-number">5.1.</span> <span class="toc-text">🎉提取css成为单个文件？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6"><span class="toc-number">5.1.0.1.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E6%8F%92%E4%BB%B6"><span class="toc-number">5.1.0.2.</span> <span class="toc-text">引入插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E6%8F%92%E4%BB%B6"><span class="toc-number">5.1.0.3.</span> <span class="toc-text">插入插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E9%85%8D%E7%BD%AE"><span class="toc-number">5.1.0.4.</span> <span class="toc-text">引入配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89css%E5%85%BC%E5%AE%B9%E6%80%A7%E5%A4%84%E7%90%86%EF%BC%9F"><span class="toc-number">5.2.</span> <span class="toc-text">🎉css兼容性处理？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E6%8F%92%E4%BB%B6"><span class="toc-number">5.2.0.1.</span> <span class="toc-text">安装依赖插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E9%A1%B9webpack-config-js"><span class="toc-number">5.2.0.2.</span> <span class="toc-text">配置项webpack.config.js</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#postcss%E9%85%8D%E7%BD%AE"><span class="toc-number">5.2.0.3.</span> <span class="toc-text">postcss配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9package-json"><span class="toc-number">5.2.0.4.</span> <span class="toc-text">修改package.json</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E5%8E%8B%E7%BC%A9css%E6%96%87%E4%BB%B6%EF%BC%9F"><span class="toc-number">5.3.</span> <span class="toc-text">🎉压缩css文件？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6-1"><span class="toc-number">5.3.0.1.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E5%BC%95%E5%85%A5"><span class="toc-number">5.3.0.2.</span> <span class="toc-text">插件引入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89js%E8%AF%AD%E6%B3%95%E6%A3%80%E6%9F%A5%EF%BC%9F"><span class="toc-number">5.4.</span> <span class="toc-text">🎉js语法检查？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6-2"><span class="toc-number">5.4.0.1.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8airbnb%E9%A3%8E%E6%A0%BC%E8%AF%AD%E8%A8%80"><span class="toc-number">5.4.0.2.</span> <span class="toc-text">使用airbnb风格语言</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEpackage-json"><span class="toc-number">5.4.0.3.</span> <span class="toc-text">配置package.json</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E4%BF%AE%E5%A4%8D"><span class="toc-number">5.4.0.4.</span> <span class="toc-text">配置自动修复</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%BD%E7%95%A5%E6%9F%90%E4%B8%80%E8%A1%8C%EF%BC%88%E5%A6%82console-log"><span class="toc-number">5.4.0.5.</span> <span class="toc-text">忽略某一行（如console.log)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89js%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%85%BC%E5%AE%B9%E6%80%A7%E9%97%AE%E9%A2%98%EF%BC%9F"><span class="toc-number">5.5.</span> <span class="toc-text">🎉js的基本兼容性问题？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6-3"><span class="toc-number">5.5.0.1.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E9%85%8D%E7%BD%AE"><span class="toc-number">5.5.0.2.</span> <span class="toc-text">新增配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89js%E7%9A%84%E5%85%A8%E9%83%A8%E5%85%BC%E5%AE%B9%E6%80%A7%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86%EF%BC%9F%EF%BC%88%E9%9D%9E%E5%B8%B8%E6%9A%B4%E5%8A%9B%EF%BC%8C%E4%BD%86%E5%B7%B2%E5%BC%83%E7%94%A8%EF%BC%89"><span class="toc-number">5.6.</span> <span class="toc-text">🎉js的全部兼容性问题处理？（非常暴力，但已弃用）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6-4"><span class="toc-number">5.6.0.1.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">5.6.0.2.</span> <span class="toc-text">使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89js%E7%9A%84%E6%8C%89%E9%9C%80%E6%B1%82%E5%A4%84%E7%90%86%E5%85%BC%E5%AE%B9%E6%80%A7%E9%97%AE%E9%A2%98%EF%BC%9F"><span class="toc-number">5.7.</span> <span class="toc-text">🎉js的按需求处理兼容性问题？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6-5"><span class="toc-number">5.7.0.1.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-1"><span class="toc-number">5.7.0.2.</span> <span class="toc-text">使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89js%E5%92%8Chtml%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%A4%84%E7%90%86%EF%BC%9F"><span class="toc-number">5.8.</span> <span class="toc-text">🎉js和html的压缩处理？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#js%E5%8E%8B%E7%BC%A9"><span class="toc-number">5.8.0.1.</span> <span class="toc-text">js压缩</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E6%9C%80%E7%BB%88%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%EF%BC%9F"><span class="toc-number">5.9.</span> <span class="toc-text">🎉最终生产环境配置？</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83webpack%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%EF%BC%9F"><span class="toc-number">6.</span> <span class="toc-text">第六章开发环境webpack性能优化？</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D%EF%BC%9F"><span class="toc-number">6.1.</span> <span class="toc-text">🎉基本介绍？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E6%89%93%E5%8C%85%E9%80%9F%E5%BA%A6%E4%BC%98%E5%8C%96-HMR%EF%BC%9F"><span class="toc-number">6.2.</span> <span class="toc-text">🎉打包速度优化-HMR？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95"><span class="toc-number">6.2.0.1.</span> <span class="toc-text">方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%9C%A8%E9%97%AE%E9%A2%98"><span class="toc-number">6.2.0.2.</span> <span class="toc-text">存在问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E7%AD%96%E7%95%A5"><span class="toc-number">6.2.0.3.</span> <span class="toc-text">解决策略</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95%E4%BC%98%E5%8C%96-source-map%EF%BC%9F"><span class="toc-number">6.3.</span> <span class="toc-text">🎉代码调试优化-source-map？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">6.3.0.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">6.3.0.2.</span> <span class="toc-text">基本使用方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4"><span class="toc-number">6.3.0.3.</span> <span class="toc-text">常用指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">6.3.0.4.</span> <span class="toc-text">具体使用方法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83webpack%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%EF%BC%9F"><span class="toc-number">7.</span> <span class="toc-text">第七章生产环境webpack性能优化？</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E6%89%93%E5%8C%85%E9%80%9F%E5%BA%A6%E4%BC%98%E5%8C%96-oneOf%EF%BC%9F"><span class="toc-number">7.1.</span> <span class="toc-text">🎉打包速度优化-oneOf？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">7.1.0.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-number">7.1.0.2.</span> <span class="toc-text">注意</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E6%89%93%E5%8C%85%E9%80%9F%E5%BA%A6%E4%BC%98%E5%8C%96-%E7%BC%93%E5%AD%98%EF%BC%9F"><span class="toc-number">7.2.</span> <span class="toc-text">🎉打包速度优化-缓存？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#babel%E7%BC%93%E5%AD%98"><span class="toc-number">7.2.0.1.</span> <span class="toc-text">babel缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BB%A3%E7%A0%81"><span class="toc-number">7.2.0.2.</span> <span class="toc-text">基本的服务器代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%B5%84%E6%BA%90%E7%BC%93%E5%AD%98"><span class="toc-number">7.2.0.3.</span> <span class="toc-text">文件资源缓存</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E6%89%93%E5%8C%85%E9%80%9F%E5%BA%A6%E4%BC%98%E5%8C%96-%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%89%93%E5%8C%85%EF%BC%9F"><span class="toc-number">7.3.</span> <span class="toc-text">🎉打包速度优化-多进程打包？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-5"><span class="toc-number">7.3.0.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-2"><span class="toc-number">7.3.0.2.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%89%93%E5%8C%85%E7%9A%84%E5%88%A9%E5%BC%8A"><span class="toc-number">7.3.0.3.</span> <span class="toc-text">使用多进程打包的利弊</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E4%BB%A3%E7%A0%81%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-tree-shaking%EF%BC%9F"><span class="toc-number">7.4.</span> <span class="toc-text">🎉代码性能优化-tree-shaking？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5-1"><span class="toc-number">7.4.0.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">7.4.0.2.</span> <span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E4%BB%A3%E7%A0%81%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-%E4%BB%A3%E7%A0%81%E5%88%86%E5%89%B2code-split%EF%BC%9F"><span class="toc-number">7.5.</span> <span class="toc-text">🎉代码性能优化-代码分割code split？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E5%85%A5%E5%8F%A3%E5%87%BA%E5%8F%A3%E6%96%87%E4%BB%B6%E7%9A%84%E9%87%8D%E5%91%BD%E5%90%8D"><span class="toc-number">7.5.0.1.</span> <span class="toc-text">多入口出口文件的重命名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-number">7.5.0.2.</span> <span class="toc-text">多文件处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E4%BB%A3%E7%A0%81%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-lazy-loading%EF%BC%9F"><span class="toc-number">7.6.</span> <span class="toc-text">🎉代码性能优化-lazy loading？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5-2"><span class="toc-number">7.6.0.1.</span> <span class="toc-text">概念</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E4%BB%A3%E7%A0%81%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-PWA%EF%BC%9F"><span class="toc-number">7.7.</span> <span class="toc-text">🎉代码性能优化-PWA？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-1"><span class="toc-number">7.7.0.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-6"><span class="toc-number">7.7.0.2.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%85%A5-1"><span class="toc-number">7.7.0.3.</span> <span class="toc-text">引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE-5"><span class="toc-number">7.7.0.4.</span> <span class="toc-text">修改配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%86%8Csw"><span class="toc-number">7.7.0.5.</span> <span class="toc-text">注册sw</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">7.7.0.6.</span> <span class="toc-text">存在的问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E4%BB%A3%E7%A0%81%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-externals%EF%BC%9F"><span class="toc-number">7.8.</span> <span class="toc-text">🎉代码性能优化-externals？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5-3"><span class="toc-number">7.8.0.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95-1"><span class="toc-number">7.8.0.2.</span> <span class="toc-text">方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E4%BB%A3%E7%A0%81%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-DLL%EF%BC%9F"><span class="toc-number">7.9.</span> <span class="toc-text">🎉代码性能优化-DLL？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5-4"><span class="toc-number">7.9.0.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-1"><span class="toc-number">7.9.0.2.</span> <span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E7%AB%A0webpack%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3%EF%BC%9F"><span class="toc-number">8.</span> <span class="toc-text">第八章webpack配置详解？</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89entry%EF%BC%9F"><span class="toc-number">8.1.</span> <span class="toc-text">🎉entry？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#string%E7%B1%BB%E5%9E%8B"><span class="toc-number">8.1.0.1.</span> <span class="toc-text">string类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#array-%E7%B1%BB%E5%9E%8B"><span class="toc-number">8.1.0.2.</span> <span class="toc-text">array 类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#object%E7%B1%BB%E5%9E%8B"><span class="toc-number">8.1.0.3.</span> <span class="toc-text">object类型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89output%EF%BC%9F"><span class="toc-number">8.2.</span> <span class="toc-text">🎉output？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-2"><span class="toc-number">8.2.0.1.</span> <span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89module%EF%BC%9F"><span class="toc-number">8.3.</span> <span class="toc-text">🎉module？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-3"><span class="toc-number">8.3.0.1.</span> <span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89module%EF%BC%9F-1"><span class="toc-number">8.4.</span> <span class="toc-text">🎉module？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-4"><span class="toc-number">8.4.0.1.</span> <span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89devServer%EF%BC%9F"><span class="toc-number">8.5.</span> <span class="toc-text">🎉devServer？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-5"><span class="toc-number">8.5.0.1.</span> <span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89module%EF%BC%9F-2"><span class="toc-number">8.6.</span> <span class="toc-text">🎉module？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-6"><span class="toc-number">8.6.0.1.</span> <span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E7%AB%A0webpack5%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7%EF%BC%9F"><span class="toc-number">9.</span> <span class="toc-text">第九章webpack5的新特性？</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E9%87%8D%E7%82%B9%E5%86%85%E5%AE%B9%EF%BC%9F"><span class="toc-number">9.1.</span> <span class="toc-text">🎉重点内容？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E4%B8%8B%E8%BD%BD%EF%BC%9F%EF%BC%88%E6%88%AA%E6%AD%A22020%E5%B9%B411%E6%9C%88%E5%B7%B2%E7%BB%8F%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E4%B8%8B%E4%BA%86%EF%BC%89"><span class="toc-number">9.2.</span> <span class="toc-text">🎉下载？（截止2020年11月已经可以直接下了）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E8%87%AA%E5%8A%A8%E5%88%A0%E9%99%A4-Node-js-Polyfills"><span class="toc-number">9.3.</span> <span class="toc-text">🎉自动删除 Node.js Polyfills?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89Chunk-ID%EF%BC%9F"><span class="toc-number">9.4.</span> <span class="toc-text">🎉Chunk ID？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89Tree-Shaking%EF%BC%9F"><span class="toc-number">9.5.</span> <span class="toc-text">🎉Tree Shaking？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89Output%EF%BC%9F"><span class="toc-number">9.6.</span> <span class="toc-text">🎉Output？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89Caching%EF%BC%9F"><span class="toc-number">9.7.</span> <span class="toc-text">🎉Caching？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E7%9B%91%E8%A7%86%E8%BE%93%E5%87%BA%E6%96%87%E4%BB%B6%EF%BC%9F"><span class="toc-number">9.8.</span> <span class="toc-text">🎉监视输出文件？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%89%E9%BB%98%E8%AE%A4%E5%80%BC%EF%BC%9F"><span class="toc-number">9.9.</span> <span class="toc-text">🎉默认值？</span></a></li></ol></li></div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2020/11/15/2020-11-15/" title="vue3.0学习 Day13"><img data-lazy-src="/images/letter/v.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="vue3.0学习 Day13"></a><div class="content"><a class="title" href="/2020/11/15/2020-11-15/" title="vue3.0学习 Day13">vue3.0学习 Day13</a><time datetime="2020-11-15T10:32:00.000Z" title="发表于 2020-11-15 18:32:00">2020-11-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/14/2020-11-14/" title="vue3.0学习 Day12"><img data-lazy-src="/images/letter/v.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="vue3.0学习 Day12"></a><div class="content"><a class="title" href="/2020/11/14/2020-11-14/" title="vue3.0学习 Day12">vue3.0学习 Day12</a><time datetime="2020-11-14T10:32:00.000Z" title="发表于 2020-11-14 18:32:00">2020-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/11/2020-11-11/" title="vue3.0学习 Day11"><img data-lazy-src="/images/letter/v.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="vue3.0学习 Day11"></a><div class="content"><a class="title" href="/2020/11/11/2020-11-11/" title="vue3.0学习 Day11">vue3.0学习 Day11</a><time datetime="2020-11-11T10:32:00.000Z" title="发表于 2020-11-11 18:32:00">2020-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/10/2020-11-10/" title="webpack从零到精通"><img data-lazy-src="/images/letter/w.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="webpack从零到精通"></a><div class="content"><a class="title" href="/2020/11/10/2020-11-10/" title="webpack从零到精通">webpack从零到精通</a><time datetime="2020-11-09T18:32:00.000Z" title="发表于 2020-11-10 02:32:00">2020-11-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/09/2020-11-09/" title="vue3.0学习 Day10"><img data-lazy-src="/images/letter/v.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="vue3.0学习 Day10"></a><div class="content"><a class="title" href="/2020/11/09/2020-11-09/" title="vue3.0学习 Day10">vue3.0学习 Day10</a><time datetime="2020-11-08T18:32:00.000Z" title="发表于 2020-11-09 02:32:00">2020-11-09</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 By しゅふがく</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/Zfour/zfe-2.0@1.20/js/utils.js"></script><script src="https://cdn.jsdelivr.net/gh/Zfour/zfe-2.0@1.20/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer="defer"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: 'VqQJf6gxMeAMKUwwq1bWe5JY-MdYXbMMI',
      appKey: 'r72Soi69hGmPdfKcGubbCWAn',
      placeholder: '都看到这里了，还不留个脚印？',
      avatar: 'retro',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
    }

    if (true) { 
      initData.requiredFields= ('nick,mail'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign({}, initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else $.getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(() => loadValine(), 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="https://cdn.jsdelivr.net/gh/Zfour/butterfly-orchid@1.11/key.js"></script><script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script><script src="https://cdn.jsdelivr.net/gh/Zfour/butterfly-orchid@1.11/main.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/unitychan.model.json"},display:{position:"right",width:150,height:300},mobile:{show:!1},react:{opacity:.7},log:!1})</script><script async>window.onload=function(){var e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.type="text/javascript",e.async=!0,e.src="/sw-register.js?v="+Date.now(),t.parentNode.insertBefore(e,t)}</script></body></html>